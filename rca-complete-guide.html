<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salesforce Revenue Cloud Advanced (RCA) — Complete Knowledge Guide</title>
    <style>
        :root {
            --sf-blue: #0176d3;
            --sf-dark: #032d60;
            --sf-light: #f4f6f9;
            --sf-green: #2e844a;
            --sf-orange: #fe9339;
            --sf-red: #ea001e;
            --sf-purple: #730394;
            --sf-teal: #0d9dda;
            --border: #d8dde6;
            --text: #181818;
            --text-muted: #5a6872;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Salesforce Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: var(--sf-light);
        }

        .hero {
            background: linear-gradient(135deg, #032d60 0%, #0176d3 50%, #1b96ff 100%);
            color: white;
            padding: 4rem 2rem 3rem;
            text-align: center;
        }

        .hero h1 { font-size: 2.8rem; margin-bottom: 0.5rem; font-weight: 800; }
        .hero .subtitle { font-size: 1.2rem; opacity: 0.9; margin-bottom: 1rem; }

        .hero .badges {
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero .badge {
            background: rgba(255,255,255,0.15);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            backdrop-filter: blur(4px);
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }

        /* Navigation */
        .nav-bar {
            background: white;
            border-radius: 12px;
            padding: 1.5rem 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: padding 0.25s ease, border-radius 0.25s ease;
        }

        .nav-bar.collapsed {
            padding: 0.5rem 1.2rem;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.12);
        }

        .nav-bar h3 { color: var(--sf-dark); margin-bottom: 0.8rem; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; }

        .nav-bar .nav-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-bar.collapsed h3 { margin-bottom: 0; }

        .nav-toggle {
            display: none;
            background: var(--sf-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.25rem 0.7rem;
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--sf-blue);
            cursor: pointer;
            white-space: nowrap;
            transition: background 0.15s;
        }

        .nav-toggle:hover { background: var(--sf-blue); color: white; }

        .nav-bar.collapsed .nav-toggle { display: inline-flex; align-items: center; gap: 0.3rem; }

        .nav-links {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            transition: max-height 0.3s ease, opacity 0.25s ease;
            overflow: hidden;
        }

        .nav-bar.collapsed .nav-links {
            max-height: 0;
            opacity: 0;
            margin: 0;
        }

        .nav-bar.collapsed.expanded .nav-links {
            max-height: 500px;
            opacity: 1;
            margin-top: 0.6rem;
        }

        .nav-links a {
            padding: 0.4rem 0.9rem;
            background: var(--sf-light);
            border-radius: 6px;
            text-decoration: none;
            color: var(--sf-dark);
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-links a:hover { background: var(--sf-blue); color: white; }

        .nav-links a.cpq { border-left: 3px solid var(--sf-orange); }
        .nav-links a.rca { border-left: 3px solid var(--sf-blue); }

        /* Sections */
        .section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .section h2 {
            color: var(--sf-dark);
            font-size: 1.6rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--sf-blue);
        }

        .section h3 {
            color: var(--sf-blue);
            margin: 1.8rem 0 0.8rem 0;
            font-size: 1.2rem;
        }

        .section h4 {
            color: var(--sf-dark);
            margin: 1.2rem 0 0.5rem 0;
            font-size: 1.05rem;
        }

        .section p { margin-bottom: 0.7rem; }
        .section ul, .section ol { padding-left: 1.5rem; margin-bottom: 1rem; }
        .section li { margin-bottom: 0.4rem; }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.88rem;
        }

        th {
            background: var(--sf-dark);
            color: white;
            padding: 0.7rem 0.8rem;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        td {
            padding: 0.6rem 0.8rem;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        tr:nth-child(even) { background: #f8f9fb; }
        tr:hover { background: #e8f0fe; }

        /* Mapping tables */
        .mapping-table th:first-child { background: var(--sf-orange); min-width: 200px; }
        .mapping-table th:nth-child(2) { background: var(--sf-blue); min-width: 200px; }

        .mapping-table td:first-child {
            font-family: 'SF Mono', monospace;
            font-size: 0.82rem;
            color: #7c4700;
            background: #fff8f0;
        }

        .mapping-table td:nth-child(2) {
            font-family: 'SF Mono', monospace;
            font-size: 0.82rem;
            color: #004085;
            background: #f0f7ff;
        }

        /* Callout boxes */
        .callout {
            padding: 1rem 1.2rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
        }

        .callout-blue { background: #f0f7ff; border-left: 4px solid var(--sf-blue); }
        .callout-green { background: #e8f5e9; border-left: 4px solid var(--sf-green); }
        .callout-orange { background: #fff8e1; border-left: 4px solid var(--sf-orange); }
        .callout-red { background: #ffeef0; border-left: 4px solid var(--sf-red); }
        .callout-purple { background: #f3e5f5; border-left: 4px solid var(--sf-purple); }

        .callout strong { display: block; margin-bottom: 0.3rem; }
        .callout-blue strong { color: var(--sf-blue); }
        .callout-green strong { color: var(--sf-green); }
        .callout-orange strong { color: #e65100; }
        .callout-red strong { color: var(--sf-red); }
        .callout-purple strong { color: var(--sf-purple); }

        /* Diagrams */
        .diagram {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'SF Mono', 'Fira Code', monospace;
            font-size: 0.82rem;
            line-height: 1.6;
            overflow-x: auto;
            white-space: pre;
            margin: 1rem 0;
        }

        .diagram-light {
            background: white;
            color: var(--text);
            border: 2px solid var(--border);
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'SF Mono', monospace;
            font-size: 0.82rem;
            line-height: 1.7;
            overflow-x: auto;
            white-space: pre;
            margin: 1rem 0;
        }

        code {
            background: #f0f2f5;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-family: 'SF Mono', monospace;
            font-size: 0.85em;
            color: var(--sf-purple);
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.2rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'SF Mono', monospace;
            font-size: 0.82rem;
            line-height: 1.5;
        }

        /* Comparison */
        .vs-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 1rem 0;
        }

        .vs-card {
            border: 2px solid var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .vs-card.cpq { border-top: 4px solid var(--sf-orange); }
        .vs-card.rca { border-top: 4px solid var(--sf-blue); }

        .vs-card .card-head {
            padding: 0.8rem 1rem;
            font-weight: 700;
            font-size: 1rem;
        }

        .vs-card.cpq .card-head { background: #fff3e0; color: #e65100; }
        .vs-card.rca .card-head { background: #e3f2fd; color: var(--sf-dark); }

        .vs-card .card-body { padding: 1rem; }
        .vs-card .card-body ul { padding-left: 1.2rem; }
        .vs-card .card-body li { margin-bottom: 0.3rem; font-size: 0.9rem; }

        /* Two columns */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .three-col {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }

        .feature-card {
            background: var(--sf-light);
            border-radius: 8px;
            padding: 1.2rem;
        }

        .feature-card h4 { color: var(--sf-blue); margin-bottom: 0.5rem; }

        @media (max-width: 768px) {
            .vs-grid, .two-col, .three-col { grid-template-columns: 1fr; }
            .hero h1 { font-size: 2rem; }
            .nav-bar { position: static; }
            .nav-bar.collapsed .nav-links { max-height: none; opacity: 1; }
            .nav-toggle { display: none !important; }
        }

        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--sf-blue);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1.4rem;
            line-height: 48px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(1, 118, 211, 0.4);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s, transform 0.3s, background 0.2s;
            z-index: 999;
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background: var(--sf-dark);
            box-shadow: 0 6px 16px rgba(3, 45, 96, 0.5);
        }

        @media print {
            body { background: white; font-size: 11pt; }
            .hero { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .section { box-shadow: none; border: 1px solid #ddd; page-break-inside: avoid; }
            .nav-bar { display: none; }
            .back-to-top { display: none; }
        }
    </style>
</head>
<body>

<div class="hero">
    <h1>Revenue Cloud Advanced (RCA)</h1>
    <div class="subtitle">Complete Knowledge Guide &amp; CPQ-to-RCA Transition Reference</div>
    <div class="badges">
        <span class="badge">Formerly Revenue Lifecycle Management (RLM)</span>
        <span class="badge">Launched Dreamforce 2024</span>
        <span class="badge">Updated Feb 2026</span>
    </div>
    <div style="margin-top:0.6rem; font-size:0.85rem; opacity:0.8;">Prepared by Eddie Zaragoza &mdash; <a href="mailto:ezaragoza@crosscountry-consulting.com" style="color:white;">ezaragoza@crosscountry-consulting.com</a></div>
</div>

<div class="container">

    <!-- NAVIGATION -->
    <div class="nav-bar" id="navBar">
        <div class="nav-header">
            <h3>Quick Navigation</h3>
            <button class="nav-toggle" id="navToggle">&#9776; Show Links</button>
        </div>
        <div class="nav-links">
            <a href="#what-is-rca" class="rca">What is RCA</a>
            <a href="#architecture" class="rca">Architecture</a>
            <a href="#data-model" class="rca">Data Model</a>
            <a href="#cpq-mapping" class="cpq">CPQ → RCA Mapping</a>
            <a href="#product-catalog" class="rca">Product Catalog</a>
            <a href="#pricing" class="rca">Pricing Engine</a>
            <a href="#price-waterfall" class="rca">Price Waterfall</a>
            <a href="#rules" class="rca">Rules &amp; Config</a>
            <a href="#quoting" class="rca">Quoting</a>
            <a href="#quote-line-groups" class="rca">Quote Line Groups</a>
            <a href="#orders-assets" class="rca">Orders &amp; Assets</a>
            <a href="#billing" class="rca">Billing</a>
            <a href="#omniscripts" class="rca">OmniScripts</a>
            <a href="#cpq-deep-dive" class="cpq">CPQ Deep Dive</a>
            <a href="#migration" class="cpq">Migration Guide</a>
            <a href="#best-practices" class="rca">Best Practices</a>
            <a href="#enhancements" class="rca">Recent Updates</a>
            <a href="#resources" class="rca">Resources</a>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- WHAT IS RCA -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="what-is-rca">
        <h2>What is Revenue Cloud Advanced?</h2>

        <p>Revenue Cloud Advanced (RCA) is Salesforce's next-generation revenue management platform. It was announced at <strong>Dreamforce 2024</strong> and replaces the legacy CPQ (Configure, Price, Quote) managed package with a native, platform-built solution that covers the entire quote-to-revenue lifecycle.</p>

        <div class="callout callout-blue">
            <strong>Key Distinction</strong>
            RCA is built on <strong>Salesforce Core standard objects</strong> — not a managed package. There is no <code>SBQQ__</code> namespace. This fundamentally changes how everything works.
        </div>

        <h3>The Evolution</h3>
        <svg viewBox="0 0 900 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;">
          <defs>
            <linearGradient id="tlOrange" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#e65100"/><stop offset="100%" stop-color="#ff8f00"/></linearGradient>
            <linearGradient id="tlPurple" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="tlTeal" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="tlBlue" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="tlGreen" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#059669"/></linearGradient>
            <linearGradient id="tlRed" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#ef476f"/><stop offset="100%" stop-color="#d63d5e"/></linearGradient>
          </defs>
          <rect x="0" y="0" width="900" height="340" rx="12" fill="#f8f9ff"/>
          <text x="450" y="28" text-anchor="middle" fill="#032d60" font-family="-apple-system,sans-serif" font-size="14" font-weight="700">Salesforce Revenue Platform Timeline</text>
          <!-- Timeline line -->
          <line x1="100" y1="70" x2="100" y2="220" stroke="#d1d5db" stroke-width="3"/>
          <!-- Dot + Bar: CPQ -->
          <circle cx="100" cy="70" r="8" fill="url(#tlOrange)"/>
          <rect x="130" y="50" width="320" height="45" rx="8" fill="url(#tlOrange)"/>
          <text x="145" y="70" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">2015-2019: Salesforce CPQ</text>
          <text x="145" y="86" fill="#ffe0b2" font-family="-apple-system,sans-serif" font-size="10.5">Acquired from SteelBrick &bull; SBQQ__ managed package</text>
          <!-- Dot + Bar: Billing -->
          <circle cx="100" cy="120" r="8" fill="url(#tlPurple)"/>
          <rect x="130" y="100" width="320" height="45" rx="8" fill="url(#tlPurple)"/>
          <text x="145" y="120" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">2019-2023: + Salesforce Billing</text>
          <text x="145" y="136" fill="#e0d0ff" font-family="-apple-system,sans-serif" font-size="10.5">Invoicing, payments, revenue recognition &bull; blng__</text>
          <!-- Dot + Bar: RLM -->
          <circle cx="100" cy="170" r="8" fill="url(#tlTeal)"/>
          <rect x="130" y="150" width="320" height="45" rx="8" fill="url(#tlTeal)"/>
          <text x="145" y="170" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">2023-2024: Revenue Lifecycle Mgmt (RLM)</text>
          <text x="145" y="186" fill="#bae6fd" font-family="-apple-system,sans-serif" font-size="10.5">Early native platform approach &bull; Rebranded to RCA</text>
          <!-- Dot + Bar: RCA -->
          <circle cx="100" cy="220" r="8" fill="url(#tlBlue)"/>
          <rect x="130" y="200" width="320" height="45" rx="8" fill="url(#tlBlue)"/>
          <text x="145" y="220" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">2024+: Revenue Cloud Advanced (RCA)</text>
          <text x="145" y="236" fill="#c7d2fe" font-family="-apple-system,sans-serif" font-size="10.5">Full native replacement &bull; Standard objects &bull; 3x/yr releases</text>
          <!-- Current State comparison boxes -->
          <rect x="500" y="60" width="185" height="130" rx="10" fill="url(#tlRed)" opacity="0.85"/>
          <text x="592" y="85" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">LEGACY</text>
          <text x="592" y="102" text-anchor="middle" fill="#ffc9d1" font-family="-apple-system,sans-serif" font-size="10.5">Maintenance Mode</text>
          <line x1="520" y1="112" x2="665" y2="112" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
          <text x="592" y="130" text-anchor="middle" fill="#ffc9d1" font-family="-apple-system,sans-serif" font-size="10.5">CPQ + Billing</text>
          <text x="592" y="147" text-anchor="middle" fill="#ffc9d1" font-family="-apple-system,sans-serif" font-size="10.5">SBQQ__ + blng__</text>
          <text x="592" y="164" text-anchor="middle" fill="#ffc9d1" font-family="-apple-system,sans-serif" font-size="10.5">No new features</text>
          <text x="592" y="181" text-anchor="middle" fill="#ffc9d1" font-family="-apple-system,sans-serif" font-size="10.5">Migrate when ready</text>
          <rect x="700" y="60" width="185" height="130" rx="10" fill="url(#tlGreen)"/>
          <text x="792" y="85" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">MODERN</text>
          <text x="792" y="102" text-anchor="middle" fill="#a7f3d0" font-family="-apple-system,sans-serif" font-size="10.5">Active Investment</text>
          <line x1="720" y1="112" x2="865" y2="112" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
          <text x="792" y="130" text-anchor="middle" fill="#a7f3d0" font-family="-apple-system,sans-serif" font-size="10.5">Revenue Cloud Advanced</text>
          <text x="792" y="147" text-anchor="middle" fill="#a7f3d0" font-family="-apple-system,sans-serif" font-size="10.5">Standard Objects</text>
          <text x="792" y="164" text-anchor="middle" fill="#a7f3d0" font-family="-apple-system,sans-serif" font-size="10.5">3x/year feature releases</text>
          <text x="792" y="181" text-anchor="middle" fill="#a7f3d0" font-family="-apple-system,sans-serif" font-size="10.5">Salesforce strategic bet</text>
          <!-- Arrow between boxes -->
          <text x="692" y="130" text-anchor="middle" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="16" font-weight="700">→</text>
          <!-- Current State label -->
          <text x="692" y="52" text-anchor="middle" fill="#032d60" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Current State (2026)</text>
        </svg>

        <h3>What Does RCA Cover?</h3>
        <div class="three-col">
            <div class="feature-card">
                <h4>Configure</h4>
                <ul>
                    <li>Product Catalog Management</li>
                    <li>Advanced Configurator</li>
                    <li>Constraint Models &amp; CML</li>
                    <li>Attributes &amp; Classifications</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>Price</h4>
                <ul>
                    <li>Pricing Procedures</li>
                    <li>Decision Tables</li>
                    <li>Price Adjustment Schedules</li>
                    <li>Context Definitions</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>Quote</h4>
                <ul>
                    <li>Native Quote object</li>
                    <li>Product Configurator UI</li>
                    <li>Instant Pricing</li>
                    <li>Document Generation (DocGen)</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>Order</h4>
                <ul>
                    <li>Order Management</li>
                    <li>Dynamic Revenue Orchestrator</li>
                    <li>Fulfillment Management</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>Bill</h4>
                <ul>
                    <li>Billing &amp; Invoicing</li>
                    <li>Usage Management &amp; Rating</li>
                    <li>Wallet/Credits</li>
                    <li>Tax Management</li>
                </ul>
            </div>
            <div class="feature-card">
                <h4>Recognize</h4>
                <ul>
                    <li>Revenue Recognition (ASC 606)</li>
                    <li>Asset Lifecycle Management</li>
                    <li>Contract Lifecycle Mgmt</li>
                    <li>MRR/ARR Reporting</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- ARCHITECTURE -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="architecture">
        <h2>Architecture</h2>

        <h3>RCA vs CPQ: Fundamental Differences</h3>
        <div class="vs-grid">
            <div class="vs-card cpq">
                <div class="card-head">CPQ (Legacy)</div>
                <div class="card-body">
                    <ul>
                        <li><strong>Managed Package</strong> (SBQQ__ namespace)</li>
                        <li>Custom objects for quotes, lines, options</li>
                        <li>Calculator engine (JavaScript-based)</li>
                        <li>Quote Line Editor (QLE) custom UI</li>
                        <li>Plugin interfaces (Apex global classes)</li>
                        <li>Price Rules + Product Rules (declarative)</li>
                        <li>Discount Schedules for volume pricing</li>
                        <li>Quote Templates for document generation</li>
                        <li>SBQQ.ServiceRouter for API access</li>
                        <li>Limited to quote-to-order scope</li>
                    </ul>
                </div>
            </div>
            <div class="vs-card rca">
                <div class="card-head">RCA (Modern)</div>
                <div class="card-body">
                    <ul>
                        <li><strong>Native Platform</strong> (standard objects)</li>
                        <li>Enhanced standard objects (Quote, Product2)</li>
                        <li>Pricing Procedures (Expression Sets)</li>
                        <li>Native Lightning UI + Product Configurator</li>
                        <li>Declarative rules (Constraints, CML)</li>
                        <li>Decision Tables + Pricing Elements</li>
                        <li>Price Adjustment Schedules</li>
                        <li>Document Generation (DocGen)</li>
                        <li>Standard Salesforce APIs</li>
                        <li>Full quote-to-revenue lifecycle</li>
                    </ul>
                </div>
            </div>
        </div>

        <h3>High-Level Flow Comparison</h3>
        <svg viewBox="0 0 900 230" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;">
          <defs>
            <linearGradient id="fcOrange" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#e65100"/><stop offset="100%" stop-color="#ff8f00"/></linearGradient>
            <linearGradient id="fcBlue" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <marker id="fcArr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8d99ae"/></marker>
          </defs>
          <rect x="0" y="0" width="900" height="230" rx="12" fill="#f8f9ff"/>
          <!-- CPQ Row -->
          <rect x="15" y="12" width="870" height="95" rx="10" fill="url(#fcOrange)" opacity="0.1"/>
          <rect x="15" y="12" width="4" height="95" rx="2" fill="url(#fcOrange)"/>
          <text x="35" y="35" fill="#e65100" font-family="-apple-system,sans-serif" font-size="13" font-weight="700">CPQ Flow</text>
          <rect x="35" y="48" width="100" height="28" rx="6" fill="url(#fcOrange)"/><text x="85" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Opportunity</text>
          <line x1="135" y1="62" x2="149" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="150" y="48" width="115" height="28" rx="6" fill="url(#fcOrange)"/><text x="207" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">SBQQ__Quote__c</text>
          <line x1="265" y1="62" x2="279" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="280" y="48" width="55" height="28" rx="6" fill="url(#fcOrange)"/><text x="307" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">QLE</text>
          <line x1="335" y1="62" x2="349" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="350" y="48" width="75" height="28" rx="6" fill="url(#fcOrange)"/><text x="387" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Calculate</text>
          <line x1="425" y1="62" x2="439" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="440" y="48" width="85" height="28" rx="6" fill="url(#fcOrange)"/><text x="482" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Quote Lines</text>
          <line x1="525" y1="62" x2="539" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="540" y="48" width="80" height="28" rx="6" fill="url(#fcOrange)"/><text x="580" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Gen Doc</text>
          <line x1="620" y1="62" x2="634" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="635" y="48" width="65" height="28" rx="6" fill="url(#fcOrange)"/><text x="667" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Order</text>
          <line x1="700" y1="62" x2="714" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="715" y="48" width="75" height="28" rx="6" fill="url(#fcOrange)"/><text x="752" y="67" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Contract</text>
          <line x1="790" y1="62" x2="804" y2="62" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="805" y="44" width="72" height="36" rx="6" fill="url(#fcOrange)"/><text x="841" y="63" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="9" font-weight="600">Subscription</text><text x="841" y="73" text-anchor="middle" fill="#ffe0b2" font-family="-apple-system,sans-serif" font-size="8">(SBQQ__)</text>
          <!-- RCA Row -->
          <rect x="15" y="122" width="870" height="95" rx="10" fill="url(#fcBlue)" opacity="0.1"/>
          <rect x="15" y="122" width="4" height="95" rx="2" fill="url(#fcBlue)"/>
          <text x="35" y="145" fill="#4361ee" font-family="-apple-system,sans-serif" font-size="13" font-weight="700">RCA Flow</text>
          <rect x="35" y="158" width="100" height="28" rx="6" fill="url(#fcBlue)"/><text x="85" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Opportunity</text>
          <line x1="135" y1="172" x2="149" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="150" y="158" width="80" height="28" rx="6" fill="url(#fcBlue)"/><text x="190" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Quote (std)</text>
          <line x1="230" y1="172" x2="244" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="245" y="158" width="75" height="28" rx="6" fill="url(#fcBlue)"/><text x="282" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Catalog</text>
          <line x1="320" y1="172" x2="334" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="335" y="158" width="80" height="28" rx="6" fill="url(#fcBlue)"/><text x="375" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Configure</text>
          <line x1="415" y1="172" x2="429" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="430" y="158" width="80" height="28" rx="6" fill="url(#fcBlue)"/><text x="470" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Pricing</text>
          <line x1="510" y1="172" x2="524" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="525" y="158" width="65" height="28" rx="6" fill="url(#fcBlue)"/><text x="557" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">DocGen</text>
          <line x1="590" y1="172" x2="604" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="605" y="158" width="60" height="28" rx="6" fill="url(#fcBlue)"/><text x="635" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Order</text>
          <line x1="665" y1="172" x2="679" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="680" y="158" width="55" height="28" rx="6" fill="url(#fcBlue)"/><text x="707" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">DRO</text>
          <line x1="735" y1="172" x2="749" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="750" y="158" width="55" height="28" rx="6" fill="url(#fcBlue)"/><text x="777" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Asset</text>
          <line x1="805" y1="172" x2="819" y2="172" stroke="#8d99ae" stroke-width="1.5" marker-end="url(#fcArr)"/>
          <rect x="820" y="158" width="60" height="28" rx="6" fill="url(#fcBlue)"/><text x="850" y="177" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Billing</text>
        </svg>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- DATA MODEL -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="data-model">
        <h2>RCA Data Model</h2>

        <h3>Product Catalog Management Objects</h3>
        <table>
            <tr><th>Object</th><th>Purpose</th><th>Key Fields/Notes</th></tr>
            <tr><td><code>ProductCatalog</code></td><td>Top-level container for curated product lists</td><td>Controls product availability per sales scenario</td></tr>
            <tr><td><code>ProductCategory</code></td><td>Hierarchical groupings within catalogs</td><td>Supports parent-child hierarchy</td></tr>
            <tr><td><code>Product2</code></td><td>Standard product object (enhanced)</td><td>ProductType (Simple/Bundle), ConfigurableDuringSale, IsAssetizable</td></tr>
            <tr><td><code>ProductSellingModel</code></td><td>Defines how a product is sold</td><td>Types: OneTime, TermDefined, Evergreen, UsageBased</td></tr>
            <tr><td><code>ProductSellingModelOption</code></td><td>Junction linking products to selling models</td><td>One product can have multiple models (no SKU duplication)</td></tr>
            <tr><td><code>ProductClassification</code></td><td>Template defining shared attributes</td><td>"Based On" lookup on Product2; enables inheritance</td></tr>
            <tr><td><code>ProductRelatedComponent</code></td><td>Child products in a bundle</td><td>Quantity, IsRequired, assigned to group</td></tr>
            <tr><td><code>ProductComponentGroup</code></td><td>Organizational grouping for bundle components</td><td>REQUIRED for configurable bundles; has Cardinality</td></tr>
            <tr><td><code>BundleBasedAdjustment</code></td><td>Bundle-specific pricing adjustment</td><td>Discount when sold as bundle vs standalone</td></tr>
            <tr><td><code>ProductRampSegment</code></td><td>Ramped deal configuration</td><td>Price/volume varying over time periods</td></tr>
        </table>

        <h3>Attributes Objects</h3>
        <table>
            <tr><th>Object</th><th>Purpose</th><th>Key Notes</th></tr>
            <tr><td><code>AttributeDefinition</code></td><td>Central template for product characteristics</td><td>Color, size, tier, region — reusable across products</td></tr>
            <tr><td><code>AttributePicklist</code></td><td>Container for available attribute values</td><td>Multiple attributes can share one picklist</td></tr>
            <tr><td><code>AttributePicklistValue</code></td><td>Individual selectable options</td><td>Within an AttributePicklist</td></tr>
            <tr><td><code>AttributeCategory</code></td><td>Groups AttributeDefinitions for UI</td><td>Improves configuration experience</td></tr>
            <tr><td><code>ProductAttributeDefinition</code></td><td>Direct attribute-to-product junction</td><td>For single products without classification</td></tr>
        </table>

        <h3>Pricing Objects</h3>
        <table>
            <tr><th>Object</th><th>Purpose</th><th>Key Notes</th></tr>
            <tr><td><code>Pricebook2</code></td><td>Standard price book (enhanced)</td><td>Links to ProductSellingModel</td></tr>
            <tr><td><code>PricebookEntry</code></td><td>Price for product in a price book</td><td>Enhanced with ProductSellingModel, IsDerived</td></tr>
            <tr><td><code>PricingProcedure</code></td><td>Calculation engine (Expression Set)</td><td>Replaces CPQ Calculator + Price Rules</td></tr>
            <tr><td><code>PricingElement</code></td><td>Individual calculation step</td><td>List Price, Discount, Surcharge, Formula</td></tr>
            <tr><td><code>DecisionTable</code></td><td>Structured lookup table for pricing logic</td><td>Replaces CPQ Price Rules</td></tr>
            <tr><td><code>ContextDefinition</code></td><td>Defines data available to pricing engine</td><td>Maps Quote/QuoteLineItem fields</td></tr>
            <tr><td><code>PriceAdjustmentSchedule</code></td><td>Volume/term-based pricing tiers</td><td>Replaces CPQ Discount Schedules</td></tr>
            <tr><td><code>PriceAdjustmentTier</code></td><td>Individual tier within a schedule</td><td>Upper/lower bounds, amount/percent</td></tr>
        </table>

        <h3>Quoting &amp; Order Objects</h3>
        <table>
            <tr><th>Object</th><th>Purpose</th><th>Key Notes</th></tr>
            <tr><td><code>Quote</code></td><td>Standard quote object (enhanced)</td><td>No more SBQQ__Quote__c</td></tr>
            <tr><td><code>QuoteLineItem</code></td><td>Standard quote line (enhanced)</td><td>No more SBQQ__QuoteLine__c</td></tr>
            <tr><td><code>Order</code></td><td>Standard order</td><td>Supports negative/zero quantities</td></tr>
            <tr><td><code>OrderItem</code></td><td>Standard order product</td><td>Links to AssetAction on activation</td></tr>
        </table>

        <h3>Asset &amp; Lifecycle Objects</h3>
        <table>
            <tr><th>Object</th><th>Purpose</th><th>Key Notes</th></tr>
            <tr><td><code>Asset</code></td><td>Standard asset (enhanced)</td><td>LifecycleStartDate, LifecycleEndDate, CurrentMrr</td></tr>
            <tr><td><code>AssetStatePeriod</code></td><td>Time-based state tracking</td><td>StartDate, EndDate, Quantity, Mrr — enables time-travel queries</td></tr>
            <tr><td><code>AssetAction</code></td><td>Lifecycle events on assets</td><td>Create, Amend, Renew, Cancel, Transfer</td></tr>
            <tr><td><code>AssetActionSource</code></td><td>Source records for asset events</td><td>Links back to triggering order/quote</td></tr>
        </table>

        <h3>Rules &amp; Configuration Objects</h3>
        <table>
            <tr><th>Object</th><th>Purpose</th><th>Key Notes</th></tr>
            <tr><td><code>RuleLibrary</code></td><td>Container grouping related rules</td><td>Version management, reusability</td></tr>
            <tr><td><code>ConstraintModel</code></td><td>Visual or CML-based product constraints</td><td>Replaces CPQ Validation Product Rules</td></tr>
            <tr><td><code>ConstraintTable</code></td><td>Structured attribute relationships</td><td>Enforces valid combinations</td></tr>
            <tr><td><code>RequireRule</code></td><td>Auto-populates dependent items</td><td>Replaces CPQ Selection Product Rules</td></tr>
            <tr><td><code>ExcludeRule</code></td><td>Prevents incompatible combinations</td><td>Replaces CPQ Validation Product Rules</td></tr>
            <tr><td><code>AutoAddRule</code> / <code>AutoRemoveRule</code></td><td>Automatic item management</td><td>Based on selections</td></tr>
            <tr><td><code>MessageRule</code></td><td>Contextual warnings (non-blocking)</td><td>Replaces CPQ Alert Product Rules</td></tr>
            <tr><td><code>QualificationRule</code></td><td>Controls product availability per context</td><td>Replaces CPQ Filter Product Rules</td></tr>
            <tr><td><code>ProductConfigurationRule</code></td><td>Configuration logic</td><td>"If X selected, Y must be Z"</td></tr>
        </table>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- CPQ TO RCA MAPPING -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="cpq-mapping">
        <h2>CPQ → RCA Object &amp; Feature Mapping</h2>

        <div class="callout callout-orange">
            <strong>For Teams Coming from CPQ</strong>
            This section provides a detailed translation of every major CPQ concept to its RCA equivalent. If you've worked with CPQ's SBQQ__ objects, this is your Rosetta Stone.
        </div>

        <h3>Core Object Mapping</h3>
        <table class="mapping-table">
            <tr><th>CPQ (SBQQ__)</th><th>RCA (Standard)</th><th>Notes</th></tr>
            <tr><td>SBQQ__Quote__c</td><td>Quote</td><td>Standard object, enhanced with RCA fields</td></tr>
            <tr><td>SBQQ__QuoteLine__c</td><td>QuoteLineItem</td><td>Standard object, enhanced with RCA fields</td></tr>
            <tr><td>SBQQ__QuoteLineGroup__c</td><td>ProductComponentGroup</td><td>No direct equivalent; groups serve different purpose</td></tr>
            <tr><td>Product2 (with SBQQ__ fields)</td><td>Product2 (enhanced standard)</td><td>No namespace fields; uses ProductType, ConfigurableDuringSale</td></tr>
            <tr><td>SBQQ__ProductOption__c</td><td>ProductRelatedComponent</td><td>Links child products to bundle parent</td></tr>
            <tr><td>SBQQ__ProductFeature__c</td><td>ProductComponentGroup</td><td>REQUIRED for configurable bundles (was optional in CPQ)</td></tr>
            <tr><td>SBQQ__ConfigurationAttribute__c</td><td>AttributeDefinition + ProductAttributeDefinition</td><td>Now metadata-based, not object records</td></tr>
            <tr><td>SBQQ__Subscription__c</td><td>Asset + AssetStatePeriod</td><td>Subscriptions tracked via asset lifecycle</td></tr>
            <tr><td>Contract</td><td>Contract (enhanced via CLM)</td><td>Contract Lifecycle Management extends standard</td></tr>
            <tr><td>Order / OrderItem</td><td>Order / OrderItem (enhanced)</td><td>Supports negative/zero quantities natively</td></tr>
        </table>

        <h3>Pricing Mapping</h3>
        <table class="mapping-table">
            <tr><th>CPQ Pricing Concept</th><th>RCA Equivalent</th><th>How It Works Now</th></tr>
            <tr><td>SBQQ__PriceRule__c</td><td>PricingProcedure + DecisionTable</td><td>Structured lookup tables replace condition/action pairs</td></tr>
            <tr><td>SBQQ__PriceCondition__c</td><td>DecisionTable conditions</td><td>Conditions are columns in the decision table</td></tr>
            <tr><td>SBQQ__PriceAction__c</td><td>PricingElement output</td><td>Output columns in decision table → pricing elements</td></tr>
            <tr><td>SBQQ__DiscountSchedule__c</td><td>PriceAdjustmentSchedule</td><td>Supports volume, term, and attribute-based tiers</td></tr>
            <tr><td>SBQQ__DiscountTier__c</td><td>PriceAdjustmentTier</td><td>Individual tier definitions with bounds</td></tr>
            <tr><td>SBQQ__ContractedPrice__c</td><td>DecisionTable (account-specific)</td><td>Account-specific pricing via decision table lookup</td></tr>
            <tr><td>CPQ Calculator (JS engine)</td><td>Pricing Procedures (Expression Sets)</td><td>Server-side, declarative, cloned from templates</td></tr>
            <tr><td>SBQQ__ListPrice__c</td><td>PricebookEntry.UnitPrice</td><td>Standard price book entry</td></tr>
            <tr><td>SBQQ__SpecialPrice__c</td><td>PricingElement override</td><td>Handled via pricing procedure logic</td></tr>
            <tr><td>SBQQ__SubscriptionPricing__c</td><td>ProductSellingModel</td><td>SellingModelType controls pricing behavior</td></tr>
            <tr><td>SBQQ__SubscriptionTerm__c</td><td>ProductSellingModel term config</td><td>Term defined at selling model level</td></tr>
            <tr><td>SBQQ__SubscriptionType__c</td><td>ProductSellingModel type</td><td>OneTime, TermDefined, Evergreen, UsageBased</td></tr>
        </table>

        <h3>Rules &amp; Configuration Mapping</h3>
        <table class="mapping-table">
            <tr><th>CPQ Rule Type</th><th>RCA Equivalent</th><th>Behavior Difference</th></tr>
            <tr><td>ProductRule (Validation)</td><td>ConstraintModel / ValidationRule</td><td>Built via Visual Builder or CML language</td></tr>
            <tr><td>ProductRule (Selection)</td><td>AutoAddRule / RequireRule</td><td>More granular — separate add vs require</td></tr>
            <tr><td>ProductRule (Filter)</td><td>QualificationRule</td><td>Context-aware product availability</td></tr>
            <tr><td>ProductRule (Alert)</td><td>MessageRule</td><td>Non-blocking contextual warnings</td></tr>
            <tr><td>SBQQ__ErrorCondition__c</td><td>Constraint conditions (CML)</td><td>CML is a domain-specific language for constraints</td></tr>
            <tr><td>SBQQ__ConfigurationType__c</td><td>ConfigurableDuringSale (boolean)</td><td>Simpler toggle vs. Allowed/Required/Prevented</td></tr>
            <tr><td>SBQQ__ConfigurationEvent__c</td><td>Product Configuration Flow</td><td>Screen Flow-based, highly customizable</td></tr>
            <tr><td>CPQ Guided Selling</td><td>Product Configuration Flow</td><td>Flow-based guided selling experience</td></tr>
        </table>

        <h3>UI &amp; Document Mapping</h3>
        <table class="mapping-table">
            <tr><th>CPQ UI/Doc Feature</th><th>RCA Equivalent</th><th>Key Change</th></tr>
            <tr><td>Quote Line Editor (QLE)</td><td>Native Quote UI + Product Configurator</td><td>No managed package UI; native Lightning</td></tr>
            <tr><td>SBQQ__QuoteTemplate__c</td><td>Document Generation (DocGen)</td><td>Template-based document generation</td></tr>
            <tr><td>SBQQ__TemplateSection__c</td><td>DocGen template sections</td><td>Different template engine</td></tr>
            <tr><td>SBQQ__LineColumn__c</td><td>Lightning page customization</td><td>Standard Lightning App Builder</td></tr>
            <tr><td>Product Search (in QLE)</td><td>Product Catalog Browse</td><td>Catalog-based browsing vs. search</td></tr>
        </table>

        <h3>API &amp; Plugin Mapping</h3>
        <table class="mapping-table">
            <tr><th>CPQ Programmatic Feature</th><th>RCA Equivalent</th><th>Migration Approach</th></tr>
            <tr><td>SBQQ.QuoteCalculatorPlugin2</td><td>Custom PricingElements in PricingProcedure</td><td>Rebuild as declarative pricing logic</td></tr>
            <tr><td>SBQQ.ProductSearchPlugin</td><td>QualificationRule + Catalog filtering</td><td>Declarative product filtering</td></tr>
            <tr><td>SBQQ.DocumentStorePlugin</td><td>DocGen configuration</td><td>Configure DocGen storage</td></tr>
            <tr><td>SBQQ.ServiceRouter (API)</td><td>Standard Salesforce REST/SOAP APIs</td><td>Use standard APIs directly</td></tr>
            <tr><td>SBQQ.ContractManipulationAPI</td><td>CLM APIs + DRO</td><td>Contract Lifecycle Management APIs</td></tr>
            <tr><td>SBQQ.TriggerControl</td><td>N/A (no managed package triggers)</td><td>Standard trigger patterns apply</td></tr>
        </table>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- CPQ DEEP DIVE -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="cpq-deep-dive">
        <h2>CPQ Deep Dive — Where Things Used to Live</h2>

        <div class="callout callout-orange">
            <strong>For the Team Coming from CPQ</strong>
            This section walks through each major CPQ area and explains exactly where that functionality now lives in RCA. Think of it as "I used to do X in CPQ — where do I do it now?"
        </div>

        <h3>Product Configuration (CPQ → RCA)</h3>
        <div class="two-col">
            <div>
                <h4>How It Worked in CPQ</h4>
                <p>In CPQ, you'd create a <strong>Product Bundle</strong> by setting <code>SBQQ__ConfigurationType__c</code> to "Allowed" on a Product2 record. Then you'd add:</p>
                <ul>
                    <li><strong>ProductFeature</strong> (SBQQ__ProductFeature__c) — optional groupings</li>
                    <li><strong>ProductOption</strong> (SBQQ__ProductOption__c) — child products linked to the bundle</li>
                    <li>Features were OPTIONAL — options could exist without them</li>
                    <li>Configuration event controlled when configurator appeared (Edit, Add, Always)</li>
                </ul>
            </div>
            <div>
                <h4>How It Works in RCA</h4>
                <p>In RCA, you set <code>ProductType = 'Bundle'</code> (CANNOT be changed later) and <code>ConfigurableDuringSale = true</code>. Then:</p>
                <ul>
                    <li><strong>ProductComponentGroup</strong> — REQUIRED for configurable bundles (unlike CPQ Features)</li>
                    <li><strong>ProductRelatedComponent</strong> — child products in groups</li>
                    <li>Groups have <strong>Cardinality</strong> (min/max constraints)</li>
                    <li><strong>Validate Product Definition</strong> button checks structure</li>
                    <li><strong>Structure tab</strong> on Product record for visual editing</li>
                </ul>
            </div>
        </div>

        <h3>Pricing Rules (CPQ → RCA)</h3>
        <div class="two-col">
            <div>
                <h4>CPQ Price Rules</h4>
                <p>CPQ Price Rules had three components:</p>
                <ol>
                    <li><strong>SBQQ__PriceRule__c</strong> — container with evaluation event</li>
                    <li><strong>SBQQ__PriceCondition__c</strong> — "when" conditions (tested object, field, operator, value)</li>
                    <li><strong>SBQQ__PriceAction__c</strong> — "what" actions (target field, value, order)</li>
                </ol>
                <p>Evaluation events: On Initialization, On Calculate, Before Calculate, After Calculate, On Edit</p>
                <p>Price Rules fired during the CPQ Calculator's execution cycle and could modify any quote line field.</p>
            </div>
            <div>
                <h4>RCA Pricing Procedures + Decision Tables</h4>
                <p>In RCA, this is completely reimagined:</p>
                <ol>
                    <li><strong>PricingProcedure</strong> — a stack of pricing elements (based on Expression Sets)</li>
                    <li><strong>DecisionTable</strong> — structured lookup tables with conditions as columns and output values</li>
                    <li><strong>PricingElement</strong> — individual steps: List Price, Discount, Surcharge, Formula</li>
                </ol>
                <p>Think of it as: CPQ's condition → action pairs become rows in a Decision Table. The Pricing Procedure orchestrates which tables to check and in what order.</p>
                <p><strong>Context Definitions</strong> define what data fields are available to the pricing engine.</p>
            </div>
        </div>

        <h3>Product Rules (CPQ → RCA)</h3>
        <div class="two-col">
            <div>
                <h4>CPQ Product Rules</h4>
                <p>CPQ had 4 product rule types in one object:</p>
                <ul>
                    <li><strong>Validation</strong> — block invalid configs with error message</li>
                    <li><strong>Selection</strong> — auto-add/suggest products</li>
                    <li><strong>Filter</strong> — control product search results</li>
                    <li><strong>Alert</strong> — show warning, don't block</li>
                </ul>
                <p>Each used SBQQ__ErrorCondition__c records to define conditions.</p>
            </div>
            <div>
                <h4>RCA Rule Types (Separated)</h4>
                <p>RCA separates these into distinct, purpose-built rule objects:</p>
                <ul>
                    <li><strong>ConstraintModel</strong> — validation (Visual Builder or CML)</li>
                    <li><strong>AutoAddRule / RequireRule</strong> — selection</li>
                    <li><strong>ExcludeRule</strong> — incompatibility enforcement</li>
                    <li><strong>QualificationRule</strong> — filtering/availability</li>
                    <li><strong>MessageRule</strong> — alerts/warnings</li>
                    <li><strong>ProductConfigurationRule</strong> — configuration logic</li>
                </ul>
                <p>Rules live in <strong>RuleLibrary</strong> containers. CML (Constraint Modeling Language) provides a powerful domain-specific language for complex constraints.</p>
            </div>
        </div>

        <h3>Subscription Management (CPQ → RCA)</h3>
        <div class="two-col">
            <div>
                <h4>CPQ Subscriptions</h4>
                <ul>
                    <li><code>SBQQ__Subscription__c</code> — tracked subscriptions</li>
                    <li><code>SBQQ__SubscriptionType__c</code> on Product (Renewable, One-Time, etc.)</li>
                    <li><code>SBQQ__SubscriptionTerm__c</code> — term length</li>
                    <li><code>SBQQ__SubscriptionPricing__c</code> — Fixed, Percent of Total</li>
                    <li>Contract → Subscriptions relationship</li>
                    <li>Amendments via <code>SBQQ.ContractManipulationAPI.AmendmentCreator</code></li>
                    <li>Renewals via <code>SBQQ.ContractManipulationAPI.RenewalCreator</code></li>
                </ul>
            </div>
            <div>
                <h4>RCA Asset Lifecycle</h4>
                <ul>
                    <li><strong>Asset</strong> (standard, enhanced) replaces Subscription</li>
                    <li><strong>ProductSellingModel</strong> replaces SubscriptionType/Term/Pricing</li>
                    <li><strong>AssetStatePeriod</strong> — tracks state at any point in time</li>
                    <li><strong>AssetAction</strong> — lifecycle events (Create, Amend, Renew, Cancel)</li>
                    <li><strong>Dynamic Revenue Orchestrator (DRO)</strong> handles amendments/renewals</li>
                    <li><strong>MRR/ARR</strong> calculated from AssetStatePeriod records</li>
                    <li><code>IsAssetizable</code> flag on Product enables asset creation</li>
                </ul>
            </div>
        </div>

        <h3>Quoting UI (CPQ → RCA)</h3>
        <div class="two-col">
            <div>
                <h4>CPQ Quote Line Editor (QLE)</h4>
                <ul>
                    <li>Custom managed package UI</li>
                    <li>Field Sets control visible columns</li>
                    <li>Line Columns (SBQQ__LineColumn__c)</li>
                    <li>"Calculate" button triggers pricing</li>
                    <li>Product search with SBQQ.ProductSearchPlugin</li>
                    <li>Guided Selling via custom UI</li>
                    <li>Quote Templates for document generation</li>
                </ul>
            </div>
            <div>
                <h4>RCA Native Quote UI</h4>
                <ul>
                    <li>Native Lightning interface (no managed package UI)</li>
                    <li>Lightning App Builder for layout customization</li>
                    <li><strong>Product Configurator</strong> — dedicated configuration app</li>
                    <li><strong>Instant Pricing</strong> — auto-calculates on every change</li>
                    <li><strong>Catalog Browse</strong> — browse products by catalog/category</li>
                    <li><strong>Product Configuration Flow</strong> — Screen Flow-based guided selling</li>
                    <li><strong>DocGen</strong> — document generation</li>
                </ul>
            </div>
        </div>

        <h3>CPQ Calculator vs RCA Pricing Engine</h3>
        <div class="two-col">
            <div>
                <h4>CPQ Calculation Sequence</h4>
                <ol>
                    <li>Original Price (List Price from PricebookEntry)</li>
                    <li>Special Price (manual override)</li>
                    <li>Regular Price (after contracted pricing)</li>
                    <li>Customer Price (after additional/partner discounts)</li>
                    <li>Net Price (after all discounts)</li>
                    <li>Prorated Price (adjusted for subscription term)</li>
                    <li>Net Total (Net Price × Quantity)</li>
                </ol>
                <p>Plugins hooked into <code>onBeforeCalculate</code>, <code>onAfterCalculate</code> events.</p>
            </div>
            <div>
                <h4>RCA Pricing Procedure Flow</h4>
                <ol>
                    <li>Context Definition loads available data</li>
                    <li>List Price Element pulls from PricebookEntry</li>
                    <li>Decision Tables evaluate pricing rules</li>
                    <li>Discount Elements apply adjustments</li>
                    <li>Surcharge Elements add charges</li>
                    <li>Formula Elements run calculations</li>
                    <li>Final price computed and written</li>
                </ol>
                <p>Everything is declarative. Custom Apex is rarely needed.</p>
            </div>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- PRODUCT CATALOG -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="product-catalog">
        <h2>Product Catalog Management</h2>

        <h3>Catalog Hierarchy</h3>
        <svg viewBox="0 0 960 390" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:960px;margin:15px auto;display:block;font-family:-apple-system,sans-serif;">
          <defs>
            <linearGradient id="catG1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#032d60"/><stop offset="100%" stop-color="#0176d3"/></linearGradient>
            <linearGradient id="catG2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="catG3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="catG4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="catG5" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#059669"/></linearGradient>
          </defs>
          <rect x="0" y="0" width="960" height="390" rx="12" fill="#f8f9ff"/>
          <!-- ProductCatalog (root) -->
          <rect x="300" y="10" width="360" height="40" rx="8" fill="url(#catG1)"/>
          <text x="480" y="36" text-anchor="middle" fill="white" font-size="12" font-weight="700">ProductCatalog: &#8220;Enterprise Software Catalog&#8221;</text>
          <!-- Connector from root down to horizontal bar, then to 3 categories -->
          <line x1="480" y1="50" x2="480" y2="65" stroke="#d1d5db" stroke-width="2"/>
          <line x1="210" y1="65" x2="840" y2="65" stroke="#d1d5db" stroke-width="2"/>
          <line x1="210" y1="65" x2="210" y2="85" stroke="#d1d5db" stroke-width="2"/>
          <line x1="575" y1="65" x2="575" y2="85" stroke="#d1d5db" stroke-width="2"/>
          <line x1="840" y1="65" x2="840" y2="85" stroke="#d1d5db" stroke-width="2"/>
          <!-- Category: Infrastructure -->
          <rect x="15" y="85" width="390" height="35" rx="7" fill="url(#catG2)"/>
          <text x="210" y="108" text-anchor="middle" fill="white" font-size="11" font-weight="700">Infrastructure</text>
          <!-- Connector drops to products -->
          <line x1="80" y1="120" x2="80" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="210" y1="120" x2="210" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="340" y1="120" x2="340" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <!-- Cloud Server Basic -->
          <rect x="20" y="145" width="120" height="44" rx="6" fill="url(#catG3)"/>
          <text x="80" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">Cloud Server Basic</text>
          <text x="80" y="180" text-anchor="middle" fill="#bae6fd" font-size="9">Simple</text>
          <!-- Cloud Server Pro -->
          <rect x="150" y="145" width="120" height="44" rx="6" fill="url(#catG3)"/>
          <text x="210" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">Cloud Server Pro</text>
          <text x="210" y="180" text-anchor="middle" fill="#bae6fd" font-size="9">Simple</text>
          <!-- Data Center Bundle -->
          <rect x="280" y="145" width="120" height="44" rx="6" fill="url(#catG4)"/>
          <text x="340" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">Data Center Bundle</text>
          <text x="340" y="180" text-anchor="middle" fill="#e0d0ff" font-size="9">Bundle</text>
          <!-- Bundle children connector -->
          <line x1="340" y1="189" x2="340" y2="197" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="280" y1="197" x2="400" y2="197" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="280" y1="197" x2="280" y2="215" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="400" y1="197" x2="400" y2="215" stroke="#d1d5db" stroke-width="1.5"/>
          <!-- Compute Group -->
          <rect x="220" y="215" width="120" height="38" rx="6" fill="url(#catG5)" opacity="0.85"/>
          <text x="280" y="233" text-anchor="middle" fill="white" font-size="10" font-weight="600">Compute Group</text>
          <text x="280" y="246" text-anchor="middle" fill="#a7f3d0" font-size="8.5">Server &#8226; Load Balancer</text>
          <!-- Storage Group -->
          <rect x="350" y="215" width="120" height="38" rx="6" fill="url(#catG5)" opacity="0.85"/>
          <text x="410" y="233" text-anchor="middle" fill="white" font-size="10" font-weight="600">Storage Group</text>
          <text x="410" y="246" text-anchor="middle" fill="#a7f3d0" font-size="8.5">SSD &#8226; Backup Service</text>
          <!-- Category: Software -->
          <rect x="450" y="85" width="250" height="35" rx="7" fill="url(#catG2)"/>
          <text x="575" y="108" text-anchor="middle" fill="white" font-size="11" font-weight="700">Software</text>
          <line x1="510" y1="120" x2="510" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="640" y1="120" x2="640" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <!-- CRM License -->
          <rect x="450" y="145" width="120" height="44" rx="6" fill="url(#catG3)"/>
          <text x="510" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">CRM License</text>
          <text x="510" y="180" text-anchor="middle" fill="#bae6fd" font-size="9">Simple</text>
          <!-- Security Suite -->
          <rect x="580" y="145" width="120" height="44" rx="6" fill="url(#catG4)"/>
          <text x="640" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">Security Suite</text>
          <text x="640" y="180" text-anchor="middle" fill="#e0d0ff" font-size="9">Bundle</text>
          <!-- Category: Services -->
          <rect x="720" y="85" width="240" height="35" rx="7" fill="url(#catG2)"/>
          <text x="840" y="108" text-anchor="middle" fill="white" font-size="11" font-weight="700">Services</text>
          <line x1="780" y1="120" x2="780" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="900" y1="120" x2="900" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <!-- Implementation -->
          <rect x="720" y="145" width="120" height="44" rx="6" fill="url(#catG3)"/>
          <text x="780" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">Implementation</text>
          <text x="780" y="180" text-anchor="middle" fill="#bae6fd" font-size="9">Simple &#8226; One-Time</text>
          <!-- Managed Services -->
          <rect x="845" y="145" width="110" height="44" rx="6" fill="url(#catG3)"/>
          <text x="900" y="165" text-anchor="middle" fill="white" font-size="10" font-weight="600">Managed Services</text>
          <text x="900" y="180" text-anchor="middle" fill="#bae6fd" font-size="9">Simple &#8226; Evergreen</text>
          <!-- Legend -->
          <rect x="30" y="280" width="900" height="95" rx="10" fill="white" stroke="#e5e7eb" stroke-width="1"/>
          <text x="50" y="305" fill="#032d60" font-size="11" font-weight="700">Legend:</text>
          <rect x="50" y="315" width="12" height="12" rx="2" fill="url(#catG1)"/><text x="70" y="326" fill="#4b5563" font-size="10.5">ProductCatalog &#8212; Top-level container</text>
          <rect x="280" y="315" width="12" height="12" rx="2" fill="url(#catG2)"/><text x="300" y="326" fill="#4b5563" font-size="10.5">ProductCategory &#8212; Hierarchical groupings</text>
          <rect x="570" y="315" width="12" height="12" rx="2" fill="url(#catG3)"/><text x="590" y="326" fill="#4b5563" font-size="10.5">Product2 (Simple)</text>
          <rect x="50" y="340" width="12" height="12" rx="2" fill="url(#catG4)"/><text x="70" y="351" fill="#4b5563" font-size="10.5">Product2 (Bundle) &#8212; Has component groups</text>
          <rect x="370" y="340" width="12" height="12" rx="2" fill="url(#catG5)"/><text x="390" y="351" fill="#4b5563" font-size="10.5">ProductComponentGroup &#8212; Related components within a bundle</text>
        </svg>

        <h3>Product Selling Models</h3>
        <p>ProductSellingModel is one of the most important new concepts in RCA. It replaces CPQ's <code>SBQQ__SubscriptionType__c</code>, <code>SBQQ__SubscriptionTerm__c</code>, and <code>SBQQ__SubscriptionPricing__c</code> fields with a dedicated object.</p>

        <table>
            <tr><th>Selling Model Type</th><th>CPQ Equivalent</th><th>Use Cases</th></tr>
            <tr><td><code>OneTime</code></td><td>Non-subscription products</td><td>Hardware, implementation fees, one-time licenses</td></tr>
            <tr><td><code>TermDefined</code></td><td>SBQQ__SubscriptionType__c = 'Renewable'</td><td>Annual subscriptions, multi-year contracts</td></tr>
            <tr><td><code>Evergreen</code></td><td>SBQQ__SubscriptionType__c = 'Renewable' (no end)</td><td>Month-to-month, ongoing managed services</td></tr>
            <tr><td><code>UsageBased</code></td><td>Custom implementation or Billing usage</td><td>Metered billing, consumption pricing, API calls</td></tr>
        </table>

        <div class="callout callout-green">
            <strong>Key Advantage Over CPQ</strong>
            In CPQ, a product that could be sold as both one-time and subscription required TWO SKUs. In RCA, one product can have multiple ProductSellingModelOptions — no SKU proliferation.
        </div>

        <h3>Attributes System</h3>
        <p>Attributes describe products beyond name and SKU — things like color, size, tier, deployment region. They drive configuration, pricing, rules, and orchestration.</p>

        <svg viewBox="0 0 900 310" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;">
          <defs>
            <linearGradient id="atG1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="atG2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="atG3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="atG4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#e65100"/><stop offset="100%" stop-color="#ff8f00"/></linearGradient>
            <linearGradient id="atGWarn" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#ef476f"/><stop offset="100%" stop-color="#d63d5e"/></linearGradient>
            <marker id="atArr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8d99ae"/></marker>
          </defs>
          <rect x="0" y="0" width="900" height="310" rx="12" fill="#f8f9ff"/>
          <text x="450" y="25" text-anchor="middle" fill="#032d60" font-family="-apple-system,sans-serif" font-size="13" font-weight="700">Two Ways to Assign Attributes</text>
          <!-- Method 1: Classification -->
          <rect x="20" y="40" width="420" height="195" rx="10" fill="url(#atG1)" opacity="0.08"/>
          <rect x="20" y="40" width="4" height="195" rx="2" fill="url(#atG1)"/>
          <text x="40" y="62" fill="#4361ee" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Method 1: Via Classification (Inheritance)</text>
          <text x="40" y="78" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="10.5">Best for product families sharing attributes</text>
          <rect x="40" y="92" width="220" height="32" rx="6" fill="url(#atG2)"/>
          <text x="150" y="113" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">ProductClassification</text>
          <text x="270" y="108" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="10">"Networking Equipment"</text>
          <line x1="150" y1="124" x2="150" y2="138" stroke="#d1d5db" stroke-width="1.5"/>
          <rect x="60" y="138" width="160" height="25" rx="5" fill="url(#atG3)"/><text x="140" y="155" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="9.5" font-weight="600">AttributeDef: "Port Count"</text>
          <rect x="230" y="138" width="165" height="25" rx="5" fill="url(#atG3)"/><text x="312" y="155" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="9.5" font-weight="600">AttributeDef: "Speed Rating"</text>
          <line x1="200" y1="163" x2="200" y2="180" stroke="#06d6a0" stroke-width="1.5" stroke-dasharray="4,3"/>
          <text x="215" y="177" fill="#059669" font-family="-apple-system,sans-serif" font-size="9" font-style="italic">inherits</text>
          <rect x="100" y="182" width="260" height="32" rx="6" fill="url(#atG1)"/>
          <text x="230" y="198" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Product2: "Switch Model A"</text>
          <text x="230" y="210" text-anchor="middle" fill="#c7d2fe" font-family="-apple-system,sans-serif" font-size="8.5">Auto-gets Port Count + Speed Rating &bull; Can override values</text>
          <!-- Method 2: Direct -->
          <rect x="460" y="40" width="420" height="195" rx="10" fill="url(#atG4)" opacity="0.08"/>
          <rect x="460" y="40" width="4" height="195" rx="2" fill="url(#atG4)"/>
          <text x="480" y="62" fill="#e65100" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Method 2: Direct Assignment</text>
          <text x="480" y="78" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="10.5">Best for unique one-off products</text>
          <rect x="480" y="92" width="220" height="32" rx="6" fill="url(#atG4)"/>
          <text x="590" y="113" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="10" font-weight="600">Product2: "Custom Widget"</text>
          <line x1="550" y1="124" x2="550" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="640" y1="124" x2="640" y2="145" stroke="#d1d5db" stroke-width="1.5"/>
          <rect x="480" y="145" width="140" height="40" rx="6" fill="url(#atG3)"/>
          <text x="550" y="163" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="9.5" font-weight="600">ProductAttributeDef</text>
          <text x="550" y="178" text-anchor="middle" fill="#bae6fd" font-family="-apple-system,sans-serif" font-size="9">→ AttrDef: "Color"</text>
          <rect x="630" y="145" width="140" height="40" rx="6" fill="url(#atG3)"/>
          <text x="700" y="163" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="9.5" font-weight="600">ProductAttributeDef</text>
          <text x="700" y="178" text-anchor="middle" fill="#bae6fd" font-family="-apple-system,sans-serif" font-size="9">→ AttrDef: "Size"</text>
          <!-- Key Difference callout -->
          <rect x="20" y="250" width="860" height="48" rx="8" fill="url(#atGWarn)" opacity="0.1"/>
          <rect x="20" y="250" width="4" height="48" rx="2" fill="url(#atGWarn)"/>
          <text x="40" y="270" fill="#ef476f" font-family="-apple-system,sans-serif" font-size="11" font-weight="700">Key Difference from CPQ:</text>
          <text x="40" y="288" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10.5">CPQ: SBQQ__ConfigurationAttribute__c = object records (DATA)  &bull;  RCA: AttributeDefinition = metadata-based (METADATA)  &bull;  Different deployment strategy needed!</text>
        </svg>

        <h3>How To: Set Up a Bundle (Step-by-Step)</h3>
        <p>Bundles in RCA work differently from CPQ. In CPQ, <code>ProductFeature</code> was optional — options could exist without features. In RCA, <code>ProductComponentGroup</code> is <strong>required</strong> for configurable bundles. Here's the full procedure:</p>

        <div class="callout callout-orange">
            <strong>CPQ vs RCA Bundle Terminology</strong>
            CPQ: Product → ProductFeature → ProductOption<br>
            RCA: Product2 (Bundle) → ProductComponentGroup → ProductRelatedComponent
        </div>

        <h4>Step 1: Plan Your Bundle Structure</h4>
        <p>Before creating anything, map out:</p>
        <ul>
            <li>What is the parent bundle product?</li>
            <li>What groups of components should the bundle contain? (e.g., "Compute", "Storage", "Support")</li>
            <li>Which child products belong in each group?</li>
            <li>Which children are required vs. optional?</li>
            <li>What are the min/max quantity constraints per group (cardinality)?</li>
        </ul>

        <div class="callout callout-red">
            <strong>Critical: ProductType Cannot Be Changed</strong>
            Once a Product2 record is created, its <code>ProductType</code> field is locked. You MUST decide if a product is "Bundle" or "Simple" before creating it. There is no going back.
        </div>

        <h4>Step 2: Create the Parent Product</h4>
        <ol>
            <li>Navigate to <strong>Product Catalog Management</strong> app (App Launcher)</li>
            <li>Create a new <code>Product2</code> record</li>
            <li>Set <code>ProductType</code> = <strong>Bundle</strong></li>
            <li>Set <code>IsActive</code> = <strong>true</strong></li>
            <li>Set <code>ConfigurableDuringSale</code> = <strong>true</strong> (if reps should be able to modify components during quoting)</li>
            <li>Set <code>IsAssetizable</code> = <strong>true</strong> (if the bundle should create assets on order activation)</li>
        </ol>

        <h4>Step 3: Create Product Component Groups</h4>
        <p>On the bundle's Product record, navigate to the <strong>Structure</strong> tab:</p>
        <ol>
            <li>Click <strong>Add Group</strong></li>
            <li>Set the <strong>Name</strong> (e.g., "Compute Options", "Support Tier")</li>
            <li>Set <strong>Cardinality</strong> — this defines min/max selections:
                <ul>
                    <li><strong>Min = 1, Max = 1</strong> — exactly one selection required (radio-button behavior)</li>
                    <li><strong>Min = 0, Max = 3</strong> — up to 3 optional selections</li>
                    <li><strong>Min = 2, Max = 5</strong> — at least 2, up to 5</li>
                </ul>
            </li>
            <li>Set <strong>Sequence</strong> to control display order</li>
            <li>Repeat for each group of related components</li>
        </ol>

        <h4>Step 4: Add Child Products as Components</h4>
        <p>Within each group, add the child products:</p>
        <ol>
            <li>Click <strong>Add Component</strong> within a group</li>
            <li>Search for and select the child <code>Product2</code> (must already exist and be Active)</li>
            <li>Configure the <code>ProductRelatedComponent</code>:
                <ul>
                    <li><strong>Default Quantity</strong> — pre-populated quantity when bundle is added to quote</li>
                    <li><strong>Is Required</strong> — if true, this component is always included</li>
                </ul>
            </li>
            <li>Optionally configure <code>BundleBasedAdjustment</code> — special pricing when sold as part of this bundle vs. standalone</li>
        </ol>

        <h4>Step 5: Set Up Pricing</h4>
        <ol>
            <li>Create <code>ProductSellingModel</code> records for the parent bundle (One-Time, Term-Defined, etc.)</li>
            <li>Create <code>PricebookEntry</code> records for both parent and child products</li>
            <li>Link selling models via <code>ProductSellingModelOption</code></li>
            <li>Run <strong>Sync Pricing Data</strong> in Setup</li>
        </ol>

        <h4>Step 6: Validate</h4>
        <ol>
            <li>On the Product record, click <strong>Validate Product Definition</strong></li>
            <li>Fix any issues flagged by the validator</li>
            <li>Test by creating a Quote and adding the bundle product</li>
            <li>Verify the configurator shows the correct groups with proper cardinality constraints</li>
        </ol>

        <table>
            <tr><th>Bundle Type</th><th>ConfigurableDuringSale</th><th>ProductComponentGroup Required?</th><th>Behavior</th></tr>
            <tr><td>Static</td><td>false</td><td>Optional</td><td>Fixed configuration — seller cannot modify components</td></tr>
            <tr><td>Configurable</td><td>true</td><td><strong>Yes — REQUIRED</strong></td><td>Seller can add/remove/modify components within cardinality rules</td></tr>
        </table>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- PRICING -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="pricing">
        <h2>Pricing Engine</h2>

        <h3>Pricing Procedure Architecture</h3>
        <p>Pricing Procedures are the heart of RCA's pricing engine. They replace both the CPQ Calculator and CPQ Price Rules with a declarative, data-driven approach.</p>

        <svg viewBox="0 0 900 390" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;font-family:-apple-system,sans-serif;">
          <defs>
            <linearGradient id="ppG1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#032d60"/><stop offset="100%" stop-color="#0176d3"/></linearGradient>
            <linearGradient id="ppG2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="ppG3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="ppG4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="ppG5" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#059669"/></linearGradient>
            <marker id="ppArr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8d99ae"/></marker>
          </defs>
          <rect x="0" y="0" width="900" height="390" rx="12" fill="#f8f9ff"/>
          <!-- PricingProcedure header -->
          <rect x="200" y="10" width="500" height="40" rx="8" fill="url(#ppG1)"/>
          <text x="450" y="36" text-anchor="middle" fill="white" font-size="13" font-weight="700">PricingProcedure (Expression Set Framework)</text>
          <line x1="450" y1="50" x2="450" y2="70" stroke="#d1d5db" stroke-width="2"/>
          <!-- ContextDefinition -->
          <rect x="150" y="70" width="600" height="48" rx="8" fill="url(#ppG3)"/>
          <text x="450" y="91" text-anchor="middle" fill="white" font-size="11" font-weight="700">ContextDefinition</text>
          <text x="450" y="108" text-anchor="middle" fill="#e0d0ff" font-size="10">Sales Transaction &#8594; Quote fields &#8226; Sales Transaction Item &#8594; QLI fields &#8226; Custom fields</text>
          <line x1="450" y1="118" x2="450" y2="140" stroke="#d1d5db" stroke-width="2" marker-end="url(#ppArr)"/>
          <!-- 3 parallel elements -->
          <!-- Element 1: Get List Price -->
          <rect x="30" y="145" width="270" height="52" rx="8" fill="url(#ppG2)"/>
          <text x="165" y="167" text-anchor="middle" fill="white" font-size="11" font-weight="700">1. Get List Price</text>
          <text x="165" y="185" text-anchor="middle" fill="#c7d2fe" font-size="10">Source: PricebookEntry.UnitPrice</text>
          <!-- Element 2: Volume Discount -->
          <rect x="315" y="145" width="270" height="52" rx="8" fill="url(#ppG2)"/>
          <text x="450" y="167" text-anchor="middle" fill="white" font-size="11" font-weight="700">2. Apply Volume Discount</text>
          <text x="450" y="185" text-anchor="middle" fill="#c7d2fe" font-size="10">DecisionTable: Product + Qty &#8594; Discount %</text>
          <!-- Element 3: Regional Surcharge -->
          <rect x="600" y="145" width="270" height="52" rx="8" fill="url(#ppG2)"/>
          <text x="735" y="167" text-anchor="middle" fill="white" font-size="11" font-weight="700">3. Regional Surcharge</text>
          <text x="735" y="185" text-anchor="middle" fill="#c7d2fe" font-size="10">DecisionTable: Region &#8594; Amount</text>
          <!-- Merge arrows down to formula -->
          <line x1="165" y1="197" x2="165" y2="220" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="450" y1="197" x2="450" y2="220" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="735" y1="197" x2="735" y2="220" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="165" y1="220" x2="735" y2="220" stroke="#d1d5db" stroke-width="1.5"/>
          <line x1="450" y1="220" x2="450" y2="242" stroke="#d1d5db" stroke-width="2" marker-end="url(#ppArr)"/>
          <!-- Element 4: Calculate Extended Price -->
          <rect x="150" y="248" width="600" height="50" rx="8" fill="url(#ppG4)"/>
          <text x="450" y="270" text-anchor="middle" fill="white" font-size="11" font-weight="700">4. Calculate Extended Price</text>
          <text x="450" y="288" text-anchor="middle" fill="#bae6fd" font-size="11">Formula: (ListPrice &#8211; Discount + Surcharge) &#215; Quantity</text>
          <!-- Arrow to output -->
          <line x1="450" y1="298" x2="450" y2="322" stroke="#d1d5db" stroke-width="2" marker-end="url(#ppArr)"/>
          <!-- Output -->
          <rect x="175" y="328" width="550" height="45" rx="8" fill="url(#ppG5)"/>
          <text x="450" y="349" text-anchor="middle" fill="white" font-size="12" font-weight="700">Output: Final Calculated Price on QuoteLineItem</text>
          <text x="450" y="365" text-anchor="middle" fill="#a7f3d0" font-size="10">Real-time pricing &#8212; no &#8220;Calculate&#8221; button needed</text>
        </svg>

        <h3>Decision Tables (Replacing CPQ Price Rules)</h3>
        <p>Decision Tables are structured lookup tables. Think of them as spreadsheets where conditions are columns on the left and output values are columns on the right.</p>

        <div class="callout callout-purple">
            <strong>CPQ → RCA Translation</strong>
            In CPQ, you had: PriceRule → PriceCondition (when) → PriceAction (what).<br>
            In RCA, you have: DecisionTable → Input columns (when) → Output columns (what).<br>
            Each row in the decision table is essentially one "price rule."
        </div>

        <h3>Price Adjustment Schedules (Replacing CPQ Discount Schedules)</h3>
        <table>
            <tr><th>Feature</th><th>CPQ (SBQQ__DiscountSchedule__c)</th><th>RCA (PriceAdjustmentSchedule)</th></tr>
            <tr><td>Volume tiers</td><td>Range or Slab type</td><td>Supported natively</td></tr>
            <tr><td>Term-based pricing</td><td>Custom implementation</td><td>Built-in support</td></tr>
            <tr><td>Attribute-based pricing</td><td>Not supported</td><td>Dynamic recalculation as attributes change</td></tr>
            <tr><td>Aggregation</td><td>Quote, Group, or Line</td><td>Flexible aggregation options</td></tr>
        </table>

        <div class="callout callout-red">
            <strong>Critical: Sync Pricing Data</strong>
            After ANY pricing configuration change (new products, price book entries, pricing procedure changes, decision table updates), you MUST run "Sync Pricing Data" in Setup. This is the #1 cause of "my pricing isn't working" issues. There is NO automatic sync — you must explicitly trigger it.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- PRICE WATERFALL -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="price-waterfall">
        <h2>Price Waterfall</h2>

        <p>The Price Waterfall shows each sequential step in the pricing calculation — from base list price down to the final net price. It provides full visibility into how every price was derived, replacing CPQ's opaque calculator with a transparent, auditable pipeline.</p>

        <div class="callout callout-blue">
            <strong>CPQ → RCA Translation</strong>
            In CPQ, pricing was a black box: the calculator ran, Price Rules fired, and you got a number. In RCA, the Price Waterfall makes every step visible and debuggable. Each pricing element is a named, ordered step you can inspect.
        </div>

        <h3>Waterfall Element Sequence</h3>
        <p>A Pricing Procedure executes elements in order, top to bottom. Each element takes input, applies its logic, and passes results to the next. Here is the standard sequence:</p>

        <svg viewBox="0 0 900 680" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;font-family:-apple-system,sans-serif;">
          <defs>
            <linearGradient id="wfG1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#032d60"/><stop offset="100%" stop-color="#0176d3"/></linearGradient>
            <linearGradient id="wfG2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="wfG3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="wfG4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="wfG5" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#059669"/></linearGradient>
            <linearGradient id="wfGOr" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#e65100"/><stop offset="100%" stop-color="#cc4800"/></linearGradient>
            <marker id="wfArr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8d99ae"/></marker>
          </defs>
          <rect x="0" y="0" width="900" height="680" rx="12" fill="#f8f9ff"/>
          <text x="450" y="28" text-anchor="middle" fill="#032d60" font-size="15" font-weight="700">Price Waterfall — Element Execution Sequence</text>
          <!-- Step 1: List Price -->
          <rect x="200" y="45" width="500" height="42" rx="8" fill="url(#wfG1)"/>
          <text x="220" y="64" fill="#a3c9ff" font-size="10" font-weight="700">1</text>
          <text x="240" y="64" fill="white" font-size="11" font-weight="700">List Price</text>
          <text x="240" y="80" fill="#c7d2fe" font-size="10">Retrieves base price from PricebookEntry based on Product + Selling Model</text>
          <line x1="450" y1="87" x2="450" y2="100" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 2: Volume/Tier Discount -->
          <rect x="200" y="105" width="500" height="42" rx="8" fill="url(#wfG2)"/>
          <text x="220" y="124" fill="#a3c9ff" font-size="10" font-weight="700">2</text>
          <text x="240" y="124" fill="white" font-size="11" font-weight="700">Volume / Tier Discount</text>
          <text x="240" y="140" fill="#c7d2fe" font-size="10">Quantity-based tiers via PriceAdjustmentSchedule + PriceAdjustmentTier</text>
          <line x1="450" y1="147" x2="450" y2="160" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 3: Attribute-Based -->
          <rect x="200" y="165" width="500" height="42" rx="8" fill="url(#wfG2)"/>
          <text x="220" y="184" fill="#a3c9ff" font-size="10" font-weight="700">3</text>
          <text x="240" y="184" fill="white" font-size="11" font-weight="700">Attribute-Based Price Adjustment</text>
          <text x="240" y="200" fill="#c7d2fe" font-size="10">Adjusts price based on product configuration (color, size, tier, etc.)</text>
          <line x1="450" y1="207" x2="450" y2="220" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 4: Bundle-Based -->
          <rect x="200" y="225" width="500" height="42" rx="8" fill="url(#wfG3)"/>
          <text x="220" y="244" fill="#e0d0ff" font-size="10" font-weight="700">4</text>
          <text x="240" y="244" fill="white" font-size="11" font-weight="700">Bundle-Based Price Adjustment</text>
          <text x="240" y="260" fill="#e0d0ff" font-size="10">Special pricing when product is sold as bundle component vs. standalone</text>
          <line x1="450" y1="267" x2="450" y2="280" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 5: Contract-Based -->
          <rect x="200" y="285" width="500" height="42" rx="8" fill="url(#wfG3)"/>
          <text x="220" y="304" fill="#e0d0ff" font-size="10" font-weight="700">5</text>
          <text x="240" y="304" fill="white" font-size="11" font-weight="700">Contract-Based Pricing</text>
          <text x="240" y="320" fill="#e0d0ff" font-size="10">Account-specific negotiated prices via Decision Table filters</text>
          <line x1="450" y1="327" x2="450" y2="340" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 6: Formula -->
          <rect x="200" y="345" width="500" height="42" rx="8" fill="url(#wfG4)"/>
          <text x="220" y="364" fill="#bae6fd" font-size="10" font-weight="700">6</text>
          <text x="240" y="364" fill="white" font-size="11" font-weight="700">Formula-Based Pricing</text>
          <text x="240" y="380" fill="#bae6fd" font-size="10">Custom calculations (supports nested IF statements as of Spring '26)</text>
          <line x1="450" y1="387" x2="450" y2="400" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 7: Manual Discount -->
          <rect x="200" y="405" width="500" height="42" rx="8" fill="url(#wfGOr)"/>
          <text x="220" y="424" fill="#ffe0b2" font-size="10" font-weight="700">7</text>
          <text x="240" y="424" fill="white" font-size="11" font-weight="700">Manual Discount</text>
          <text x="240" y="440" fill="#ffe0b2" font-size="10">User-entered adjustments applied by sales reps during quoting</text>
          <line x1="450" y1="447" x2="450" y2="460" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 8: Subscription Pricing -->
          <rect x="200" y="465" width="500" height="42" rx="8" fill="url(#wfG4)"/>
          <text x="220" y="484" fill="#bae6fd" font-size="10" font-weight="700">8</text>
          <text x="240" y="484" fill="white" font-size="11" font-weight="700">Subscription Pricing</text>
          <text x="240" y="500" fill="#bae6fd" font-size="10">Multi-period cost calculation for recurring products (Term-Defined, Evergreen)</text>
          <line x1="450" y1="507" x2="450" y2="520" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 9: Proration -->
          <rect x="200" y="525" width="500" height="42" rx="8" fill="url(#wfG4)"/>
          <text x="220" y="544" fill="#bae6fd" font-size="10" font-weight="700">9</text>
          <text x="240" y="544" fill="white" font-size="11" font-weight="700">Proration</text>
          <text x="240" y="560" fill="#bae6fd" font-size="10">Term-period multipliers for partial periods (mid-month starts, etc.)</text>
          <line x1="450" y1="567" x2="450" y2="580" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Step 10: Price Tracking -->
          <rect x="200" y="585" width="500" height="42" rx="8" fill="url(#wfG2)"/>
          <text x="220" y="604" fill="#c7d2fe" font-size="10" font-weight="700">10</text>
          <text x="240" y="604" fill="white" font-size="11" font-weight="700">Price Tracking (Floor / Ceiling)</text>
          <text x="240" y="620" fill="#c7d2fe" font-size="10">Enforces minimum and maximum price ranges to prevent margin erosion</text>
          <line x1="450" y1="627" x2="450" y2="640" stroke="#d1d5db" stroke-width="2" marker-end="url(#wfArr)"/>
          <!-- Final: Net Price -->
          <rect x="200" y="645" width="500" height="30" rx="8" fill="url(#wfG5)"/>
          <text x="450" y="665" text-anchor="middle" fill="white" font-size="12" font-weight="700">Net Price on QuoteLineItem</text>
        </svg>

        <h3>How To: Configure the Price Waterfall</h3>
        <h4>Step 1: Clone the Pricing Procedure Template</h4>
        <ol>
            <li>Navigate to <strong>Setup → Expression Set Templates</strong></li>
            <li>Find <strong>"Revenue Management Default Pricing Procedure"</strong></li>
            <li>Click <strong>Clone</strong> — give it a descriptive name (e.g., "Standard Product Pricing")</li>
            <li>Also clone <strong>"Product Discovery Pricing Procedure"</strong> (used when browsing the catalog)</li>
            <li>Set <strong>Activation Start/End Dates</strong> on each clone</li>
        </ol>

        <div class="callout callout-red">
            <strong>Never build from scratch</strong>
            Always clone from the Salesforce-provided templates. Building a pricing procedure from scratch will miss required internal elements and fail silently.
        </div>

        <h4>Step 2: Configure Context Definitions</h4>
        <p>Context Definitions map Salesforce object fields to pricing tags the procedure can reference:</p>
        <ol>
            <li>Navigate to <strong>Setup → Context Definitions</strong></li>
            <li>Create an <strong>EXT (Extended)</strong> version if you need custom fields</li>
            <li>Map sections:
                <ul>
                    <li><strong>Sales Transaction</strong> → Quote fields (Account, Opportunity, etc.)</li>
                    <li><strong>Sales Transaction Item</strong> → QuoteLineItem fields (Product, Quantity, etc.)</li>
                </ul>
            </li>
            <li>Add any custom fields your pricing logic needs (e.g., customer tier, region, industry)</li>
        </ol>

        <h4>Step 3: Add Pricing Elements</h4>
        <p>Open your cloned Pricing Procedure in the Expression Set designer and add elements in waterfall order:</p>
        <table>
            <tr><th>Element Type</th><th>What It Does</th><th>When To Use</th></tr>
            <tr><td>List Price</td><td>Pulls base price from PricebookEntry</td><td>Always — this is your starting point</td></tr>
            <tr><td>Volume Discount</td><td>Quantity-based tier adjustments</td><td>When price varies by quantity ordered</td></tr>
            <tr><td>Attribute-Based</td><td>Adjustments from product configuration</td><td>When attributes (size, color) affect price</td></tr>
            <tr><td>Bundle-Based</td><td>Discounts for bundle components</td><td>When bundle pricing differs from standalone</td></tr>
            <tr><td>Decision Table</td><td>Lookup-based pricing logic</td><td>Complex multi-dimension lookups (region + tier + product → discount)</td></tr>
            <tr><td>Formula</td><td>Custom calculations</td><td>Calculated surcharges, margin targets, currency conversion</td></tr>
            <tr><td>Manual Discount</td><td>Rep-entered adjustments</td><td>When reps need to apply ad-hoc discounts</td></tr>
            <tr><td>Subscription Pricing</td><td>Multi-period calculation</td><td>Recurring products (Term-Defined, Evergreen)</td></tr>
            <tr><td>Price Tracking</td><td>Floor/ceiling enforcement</td><td>When minimum margins or maximum discounts must be enforced</td></tr>
        </table>

        <h4>Step 4: Build Decision Tables</h4>
        <ol>
            <li>Navigate to <strong>Setup → Decision Tables</strong></li>
            <li>Create a new Decision Table (e.g., "Volume Discount Entries")</li>
            <li>Define <strong>Input columns</strong> (conditions): Product, Quantity Range, Customer Tier</li>
            <li>Define <strong>Output columns</strong> (results): Discount Percentage, Adjustment Amount</li>
            <li>Add rows — each row is essentially one price rule</li>
            <li>Link the Decision Table to the relevant Pricing Element in your procedure</li>
        </ol>

        <h4>Step 5: Create a Sales Transaction Type</h4>
        <ol>
            <li>Navigate to <strong>Setup → Sales Transaction Types</strong></li>
            <li>Create or edit a transaction type</li>
            <li>Associate your Pricing Procedure with the transaction type</li>
            <li>This links your waterfall to quotes of this type</li>
        </ol>

        <h4>Step 6: Sync and Test</h4>
        <ol>
            <li>Run <strong>Sync Pricing Data</strong> in Setup</li>
            <li>Refresh Decision Tables</li>
            <li>Use the <strong>Simulation</strong> feature in the Pricing Procedure designer:
                <ul>
                    <li><strong>Basic mode</strong> — select a product and see the waterfall result</li>
                    <li><strong>Advanced mode</strong> — provide JSON input for precise testing</li>
                </ul>
            </li>
            <li>Create a test Quote and verify pricing calculates correctly</li>
        </ol>

        <h3>Price Waterfall Visibility &amp; Logging</h3>
        <p>The Price Waterfall captures logs for every pricing procedure execution, making it easy to explain and audit pricing at each step.</p>
        <ul>
            <li><strong>Price Log</strong> — shows each element's input, calculation, and output for a given quote line</li>
            <li><strong>Advanced Price Log Settings</strong> (Spring '26) — collects detailed diagnostic data including input values and exception details for complex elements</li>
            <li><strong>Always-On Instant Pricing</strong> (Spring '26) — detects price-impacting changes and recalculates only affected lines; unchanged lines are skipped for faster processing</li>
        </ul>

        <div class="callout callout-green">
            <strong>Spring '26 Enhancement</strong>
            Pricing procedures now support up to <strong>5 levels of nesting</strong> with ascending propagation and horizontal calculations. You can also use <strong>nested IF statements</strong> within Formula-Based Pricing elements. Entire pricing solutions can be packaged for deployment across orgs.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- RULES -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="rules">
        <h2>Rules &amp; Advanced Configurator</h2>

        <h3>Setup Requirements</h3>
        <ol>
            <li>Create <code>ConstraintEngineNodeStatus</code> field (Long Text Area, 5000 chars) on: QuoteLineItem, OrderItem, AssetActionSource</li>
            <li>Assign permission sets: <code>Advanced Configurator Designer</code>, <code>Access to Rules Engine Runtime</code></li>
            <li>Enable in Setup → Revenue Settings → "Set Up Advanced Configuration Rules and Constraints"</li>
        </ol>

        <h3>Rule Type Reference</h3>
        <table>
            <tr><th>Rule Type</th><th>Purpose</th><th>Blocks Sale?</th><th>CPQ Equivalent</th></tr>
            <tr><td><strong>Constraint Model</strong></td><td>Enforce valid product combinations</td><td>Yes</td><td>Validation ProductRule</td></tr>
            <tr><td><strong>Constraint Table</strong></td><td>Structured attribute relationships</td><td>Yes</td><td>Validation ProductRule (complex)</td></tr>
            <tr><td><strong>Require Rule</strong></td><td>Auto-add dependent items</td><td>No (adds item)</td><td>Selection ProductRule</td></tr>
            <tr><td><strong>Exclude Rule</strong></td><td>Prevent incompatible combos</td><td>Yes</td><td>Validation ProductRule</td></tr>
            <tr><td><strong>Auto-Add Rule</strong></td><td>Auto-insert items on selection</td><td>No (adds item)</td><td>Selection ProductRule</td></tr>
            <tr><td><strong>Auto-Remove Rule</strong></td><td>Auto-remove items on selection</td><td>No (removes item)</td><td>N/A (new in RCA)</td></tr>
            <tr><td><strong>Message Rule</strong></td><td>Show contextual warning</td><td>No</td><td>Alert ProductRule</td></tr>
            <tr><td><strong>Qualification Rule</strong></td><td>Control product availability</td><td>N/A (filters products)</td><td>Filter ProductRule</td></tr>
            <tr><td><strong>Validation Rule</strong></td><td>Field validation (format, range)</td><td>Yes</td><td>ErrorCondition</td></tr>
            <tr><td><strong>Pricing Rule</strong></td><td>Within pricing procedures</td><td>No (adjusts price)</td><td>PriceRule</td></tr>
            <tr><td><strong>Configuration Rule</strong></td><td>If X then Y logic</td><td>Depends</td><td>ProductRule (complex)</td></tr>
        </table>

        <h3>Constraint Modeling Language (CML)</h3>
        <p>CML is a domain-specific language for expressing complex product constraints. It's an alternative to the Visual Constraint Builder for advanced scenarios.</p>

        <div class="callout callout-blue">
            <strong>CML Capabilities</strong>
            <ul style="margin-top:0.5rem">
                <li>Choice variables with contextual logic</li>
                <li>Numeric constraints and calculations</li>
                <li>Date/time-sensitive rules</li>
                <li>Nested multi-dimensional conditions</li>
                <li>Cross-bundle dependencies</li>
            </ul>
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- QUOTING -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="quoting">
        <h2>Quoting</h2>

        <h3>RCA Quote Process</h3>
        <svg viewBox="0 0 900 360" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;font-family:-apple-system,sans-serif;">
          <defs>
            <linearGradient id="qpG1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="qpG2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="qpG3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="qpG4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#059669"/></linearGradient>
            <marker id="qpArr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8d99ae"/></marker>
          </defs>
          <rect x="0" y="0" width="900" height="360" rx="12" fill="#f8f9ff"/>
          <!-- Row 1: Steps 1-4 -->
          <rect x="20" y="15" width="200" height="55" rx="8" fill="url(#qpG1)"/>
          <text x="120" y="38" text-anchor="middle" fill="white" font-size="11" font-weight="700">1. Create Quote</text>
          <text x="120" y="54" text-anchor="middle" fill="#c7d2fe" font-size="9.5">Set Account, Pricebook, name</text>
          <line x1="220" y1="42" x2="239" y2="42" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <rect x="240" y="15" width="200" height="55" rx="8" fill="url(#qpG1)"/>
          <text x="340" y="38" text-anchor="middle" fill="white" font-size="11" font-weight="700">2. Browse Catalog</text>
          <text x="340" y="54" text-anchor="middle" fill="#c7d2fe" font-size="9.5">Select from catalog/categories</text>
          <line x1="440" y1="42" x2="459" y2="42" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <rect x="460" y="15" width="200" height="55" rx="8" fill="url(#qpG2)"/>
          <text x="560" y="38" text-anchor="middle" fill="white" font-size="11" font-weight="700">3. Configure Products</text>
          <text x="560" y="54" text-anchor="middle" fill="#e0d0ff" font-size="9.5">Configurator app &#8226; Attributes &#8226; Rules</text>
          <line x1="660" y1="42" x2="679" y2="42" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <rect x="680" y="15" width="200" height="55" rx="8" fill="url(#qpG3)"/>
          <text x="780" y="38" text-anchor="middle" fill="white" font-size="11" font-weight="700">4. Instant Pricing</text>
          <text x="780" y="54" text-anchor="middle" fill="#bae6fd" font-size="9.5">PricingProcedure &#8226; Real-time</text>
          <!-- Connector from row 1 to row 2 -->
          <line x1="780" y1="70" x2="780" y2="92" stroke="#8d99ae" stroke-width="2"/>
          <line x1="120" y1="92" x2="780" y2="92" stroke="#8d99ae" stroke-width="2"/>
          <line x1="120" y1="92" x2="120" y2="110" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <!-- Row 2: Steps 5-8 -->
          <rect x="20" y="115" width="200" height="55" rx="8" fill="url(#qpG1)"/>
          <text x="120" y="138" text-anchor="middle" fill="white" font-size="11" font-weight="700">5. Review Quote Lines</text>
          <text x="120" y="154" text-anchor="middle" fill="#c7d2fe" font-size="9.5">Native Lightning UI (no QLE)</text>
          <line x1="220" y1="142" x2="239" y2="142" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <rect x="240" y="115" width="200" height="55" rx="8" fill="url(#qpG1)"/>
          <text x="340" y="138" text-anchor="middle" fill="white" font-size="11" font-weight="700">6. Generate Document</text>
          <text x="340" y="154" text-anchor="middle" fill="#c7d2fe" font-size="9.5">DocGen &#8226; Select template &#8594; PDF</text>
          <line x1="440" y1="142" x2="459" y2="142" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <rect x="460" y="115" width="200" height="55" rx="8" fill="url(#qpG2)" opacity="0.8"/>
          <text x="560" y="138" text-anchor="middle" fill="white" font-size="11" font-weight="700">7. Approval (if needed)</text>
          <text x="560" y="154" text-anchor="middle" fill="#e0d0ff" font-size="9.5">Standard process or custom flow</text>
          <line x1="660" y1="142" x2="679" y2="142" stroke="#8d99ae" stroke-width="2" marker-end="url(#qpArr)"/>
          <rect x="680" y="115" width="200" height="55" rx="8" fill="url(#qpG4)"/>
          <text x="780" y="138" text-anchor="middle" fill="white" font-size="11" font-weight="700">8. Create Order</text>
          <text x="780" y="154" text-anchor="middle" fill="#a7f3d0" font-size="9.5">DRO orchestrates fulfillment</text>
          <!-- Comparison note -->
          <rect x="20" y="195" width="860" height="155" rx="10" fill="white" stroke="#e5e7eb" stroke-width="1"/>
          <text x="40" y="220" fill="#032d60" font-size="12" font-weight="700">Key Differences from CPQ Quoting:</text>
          <rect x="40" y="232" width="12" height="12" rx="2" fill="url(#qpG4)"/><text x="60" y="243" fill="#4b5563" font-size="10.5">No QLE (Quote Line Editor) &#8212; native Lightning UI for editing lines</text>
          <rect x="40" y="254" width="12" height="12" rx="2" fill="url(#qpG4)"/><text x="60" y="265" fill="#4b5563" font-size="10.5">No &#8220;Calculate&#8221; button &#8212; pricing is instant via PricingProcedure</text>
          <rect x="40" y="276" width="12" height="12" rx="2" fill="url(#qpG4)"/><text x="60" y="287" fill="#4b5563" font-size="10.5">Product Catalog browsing replaces &#8220;Add Products&#8221; screen</text>
          <rect x="40" y="298" width="12" height="12" rx="2" fill="url(#qpG4)"/><text x="60" y="309" fill="#4b5563" font-size="10.5">Standard Quote + QuoteLineItem objects (not SBQQ__Quote__c + SBQQ__QuoteLine__c)</text>
          <rect x="40" y="320" width="12" height="12" rx="2" fill="url(#qpG4)"/><text x="60" y="331" fill="#4b5563" font-size="10.5">DRO (Dynamic Revenue Orchestrator) handles post-order automation</text>
        </svg>

        <h3>Product Configuration Flow</h3>
        <p>The configuration experience during quoting is controlled by a <strong>Screen Flow</strong>. This replaces CPQ's built-in configurator.</p>
        <ul>
            <li>Salesforce provides a default Product Configuration Flow</li>
            <li><code>ProductConfigurationFlowAssignment</code> overrides default for specific products</li>
            <li>Highly customizable but requires restraint — start with defaults</li>
        </ul>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- QUOTE LINE GROUPS -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="quote-line-groups">
        <h2>Quote Line Groups (QLG)</h2>

        <p>RCA has its own native <code>QuoteLineGroup</code> object (available API v61.0+, Summer '24). This is <strong>not</strong> the same as CPQ's <code>SBQQ__QuoteLineGroup__c</code> — it's a new standard object with different capabilities.</p>

        <div class="callout callout-orange">
            <strong>CPQ → RCA Translation</strong>
            CPQ: <code>SBQQ__QuoteLineGroup__c</code> → manually created groups with subtotals, used for document sections<br>
            RCA: <code>QuoteLineGroup</code> → native object managed through the Transaction Line Editor (TLE), supports subtotals, ramp deals, and auto-grouping
        </div>

        <h3>How Grouping Works in the Transaction Line Editor</h3>
        <p>The Transaction Line Editor (TLE) — RCA's replacement for CPQ's Quote Line Editor — provides both manual and automatic grouping:</p>

        <div class="two-col">
            <div>
                <h4>Manual Grouping</h4>
                <ol>
                    <li>Open a Quote and navigate to the <strong>Transaction Line Editor</strong></li>
                    <li>Click <strong>"Add Group"</strong> in the TLE toolbar</li>
                    <li>Edit the group name and description</li>
                    <li>Select the line items you want to group (checkbox selection)</li>
                    <li>Click <strong>"Move Selected Lines"</strong> in the group action header</li>
                    <li>Lines move into the group with subtotals displayed at group level</li>
                </ol>
            </div>
            <div>
                <h4>Automatic Grouping</h4>
                <ol>
                    <li>In the TLE, click the <strong>Group</strong> action in the toolbar</li>
                    <li>Select a column to group by (e.g., Product Family, Category)</li>
                    <li>Lines are automatically organized into groups based on column values</li>
                    <li>Group names are auto-populated but editable</li>
                    <li>Use the <strong>"Ungroup"</strong> button to return to flat view</li>
                </ol>
            </div>
        </div>

        <h3>QuoteLineGroup Capabilities</h3>
        <table>
            <tr><th>Feature</th><th>CPQ (SBQQ__QuoteLineGroup__c)</th><th>RCA (QuoteLineGroup)</th></tr>
            <tr><td>Subtotals</td><td>Aggregated group subtotals</td><td>Aggregated group subtotals (native)</td></tr>
            <tr><td>Group-Level Actions</td><td>Limited — manual</td><td>Operations applied at group level in TLE</td></tr>
            <tr><td>Auto-Grouping</td><td>Not supported natively</td><td>Automatic grouping by any column</td></tr>
            <tr><td>Ramp Deals</td><td>Not supported at group level</td><td><strong>Ramp Groups</strong> — mark a group as a ramp group with start/end dates and segment types</td></tr>
            <tr><td>Deep Clone</td><td>Custom implementation</td><td>Built-in <strong>Quote Deep Clone</strong> — replicates entire quote including lines and groups</td></tr>
            <tr><td>Multiple Orders</td><td>Custom implementation</td><td>Generate orders by group, by specific line fields, or as a single order</td></tr>
        </table>

        <h3>Ramp Deals for Groups (Winter '26+)</h3>
        <p>One of the most significant QLG enhancements — you can now create <strong>ramp deals at the group level</strong>:</p>
        <ol>
            <li>Mark a group as a <strong>"Ramp Group"</strong></li>
            <li>Define start/end dates and segment types for the ramp</li>
            <li>Products within the group follow the ramp schedule together</li>
            <li>Clone ramp segments year-over-year with uplift logic</li>
            <li>Assets created from ramped groups reflect the deal structure — one Asset with multiple <code>AssetStatePeriod</code> records per ramp segment</li>
        </ol>

        <div class="callout callout-green">
            <strong>Spring '26: Multiple Ramp Schedule Groups</strong>
            A single quote or order can now have <strong>multiple independent ramp schedule groups</strong>. You can also filter for ramped, errored, and unconfigured lines using advanced filtering in the TLE.
        </div>

        <h3>How To: Create and Use Quote Line Groups</h3>
        <h4>Setup Prerequisites</h4>
        <ol>
            <li>Enable <strong>Revenue Settings</strong> in Setup (standard RCA setup)</li>
            <li>If using ramp deals: activate <strong>"Clone Quote Line Groups"</strong> in Revenue Settings (mandatory for ramp)</li>
            <li>Deploy the <strong>Sales Transaction Line Editor (LWC)</strong> component on Quote and Order Lightning record pages</li>
        </ol>

        <h4>Creating Groups on a Quote</h4>
        <ol>
            <li>Open a Quote record</li>
            <li>Navigate to the <strong>Transaction Line Editor</strong> section</li>
            <li>Add products to the quote from the catalog</li>
            <li>Click <strong>"Add Group"</strong> → name the group (e.g., "Year 1 Licenses", "Professional Services")</li>
            <li>Select lines and move them into the appropriate group</li>
            <li>Repeat for additional groups</li>
            <li>For ramp deals: check <strong>"Ramp Group"</strong> → configure segment dates and types</li>
        </ol>

        <h4>Generating Multiple Orders from Groups</h4>
        <p>With Winter '26+, you can generate separate orders from a single quote:</p>
        <ul>
            <li><strong>By group</strong> — each QLG becomes a separate order</li>
            <li><strong>By line field</strong> — group orders by a specific field value on the line items</li>
            <li><strong>Single order</strong> — traditional behavior, all lines in one order</li>
        </ul>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- ORDERS & ASSETS -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="orders-assets">
        <h2>Orders &amp; Asset Lifecycle</h2>

        <h3>Dynamic Revenue Orchestrator (DRO)</h3>
        <p>DRO is new in RCA — it automates post-order processes that in CPQ required custom automation or manual work.</p>
        <ul>
            <li>Separates the quoted product from the ordered product</li>
            <li>Handles fulfillment orchestration automatically</li>
            <li>Manages asset creation and lifecycle transitions</li>
            <li>Processes amendments and renewals</li>
        </ul>

        <h3>Asset Lifecycle</h3>
        <svg viewBox="0 0 900 430" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;">
          <defs>
            <linearGradient id="alG1" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
            <linearGradient id="alG2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#059669"/></linearGradient>
            <linearGradient id="alG3" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#5a07a0"/></linearGradient>
            <linearGradient id="alG4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0e7490"/></linearGradient>
            <linearGradient id="alGRed" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#ef476f"/><stop offset="100%" stop-color="#d63d5e"/></linearGradient>
            <marker id="alArr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#8d99ae"/></marker>
            <marker id="alArrRed" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#ef476f"/></marker>
          </defs>
          <rect x="0" y="0" width="900" height="430" rx="12" fill="#f8f9ff"/>
          <text x="450" y="25" text-anchor="middle" fill="#032d60" font-family="-apple-system,sans-serif" font-size="14" font-weight="700">Asset Lifecycle States</text>
          <!-- State boxes -->
          <rect x="40" y="40" width="140" height="50" rx="8" fill="url(#alG1)"/>
          <text x="110" y="71" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Created</text>
          <line x1="180" y1="65" x2="219" y2="65" stroke="#8d99ae" stroke-width="2" marker-end="url(#alArr)"/>
          <rect x="220" y="40" width="140" height="50" rx="8" fill="url(#alG2)"/>
          <text x="290" y="71" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Active</text>
          <line x1="360" y1="65" x2="399" y2="65" stroke="#8d99ae" stroke-width="2" marker-end="url(#alArr)"/>
          <rect x="400" y="40" width="140" height="50" rx="8" fill="url(#alG3)"/>
          <text x="470" y="71" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Amended</text>
          <line x1="540" y1="65" x2="579" y2="65" stroke="#8d99ae" stroke-width="2" marker-end="url(#alArr)"/>
          <rect x="580" y="40" width="140" height="50" rx="8" fill="url(#alG4)"/>
          <text x="650" y="71" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Renewed</text>
          <!-- Cancelled -->
          <line x1="290" y1="90" x2="290" y2="119" stroke="#ef476f" stroke-width="2" marker-end="url(#alArrRed)"/>
          <rect x="220" y="120" width="140" height="50" rx="8" fill="url(#alGRed)"/>
          <text x="290" y="151" text-anchor="middle" fill="white" font-family="-apple-system,sans-serif" font-size="12" font-weight="700">Cancelled</text>
          <line x1="650" y1="90" x2="650" y2="145" stroke="#ef476f" stroke-width="1.5" stroke-dasharray="5,3"/>
          <line x1="650" y1="145" x2="361" y2="145" stroke="#ef476f" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#alArrRed)"/>
          <!-- AssetAction Types -->
          <rect x="760" y="35" width="130" height="145" rx="8" fill="white" stroke="#e5e7eb" stroke-width="1"/>
          <text x="825" y="55" text-anchor="middle" fill="#032d60" font-family="-apple-system,sans-serif" font-size="10" font-weight="700">AssetAction Types</text>
          <text x="775" y="73" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="9.5">Create — Provisioning</text>
          <text x="775" y="90" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="9.5">Quantity — Add/remove</text>
          <text x="775" y="107" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="9.5">Amend — Config change</text>
          <text x="775" y="124" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="9.5">Renew — New term</text>
          <text x="775" y="141" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="9.5">Cancel — Termination</text>
          <text x="775" y="158" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="9.5">Transfer — Move accts</text>
          <!-- AssetStatePeriod Timeline -->
          <text x="450" y="210" text-anchor="middle" fill="#032d60" font-family="-apple-system,sans-serif" font-size="13" font-weight="700">AssetStatePeriod — Time-Travel Queries</text>
          <!-- Timeline bar -->
          <rect x="60" y="225" width="780" height="8" rx="4" fill="#e5e7eb"/>
          <!-- Period 1 -->
          <rect x="60" y="225" width="195" height="8" rx="4" fill="url(#alG2)"/>
          <rect x="60" y="245" width="195" height="80" rx="8" fill="url(#alG2)" opacity="0.1"/>
          <text x="157" y="265" text-anchor="middle" fill="#059669" font-family="-apple-system,sans-serif" font-size="11" font-weight="700">Period 1</text>
          <text x="157" y="282" text-anchor="middle" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10">10 seats</text>
          <text x="157" y="298" text-anchor="middle" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10">$1,000/mo</text>
          <text x="157" y="318" text-anchor="middle" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="9">Jan 1 — Mar 31</text>
          <!-- Period 2 -->
          <rect x="255" y="225" width="325" height="8" rx="4" fill="url(#alG3)"/>
          <rect x="255" y="245" width="325" height="80" rx="8" fill="url(#alG3)" opacity="0.1"/>
          <text x="417" y="265" text-anchor="middle" fill="#7209b7" font-family="-apple-system,sans-serif" font-size="11" font-weight="700">Period 2 (Amended +5 seats)</text>
          <text x="417" y="282" text-anchor="middle" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10">15 seats</text>
          <text x="417" y="298" text-anchor="middle" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10">$1,500/mo</text>
          <text x="417" y="318" text-anchor="middle" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="9">Apr 1 — Dec 30</text>
          <!-- Period 3 -->
          <rect x="580" y="225" width="260" height="8" rx="4" fill="url(#alG4)"/>
          <rect x="580" y="245" width="260" height="80" rx="8" fill="url(#alG4)" opacity="0.1"/>
          <text x="710" y="265" text-anchor="middle" fill="#0e7490" font-family="-apple-system,sans-serif" font-size="11" font-weight="700">Period 3 (Renewed)</text>
          <text x="710" y="282" text-anchor="middle" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10">20 seats</text>
          <text x="710" y="298" text-anchor="middle" fill="#4b5563" font-family="-apple-system,sans-serif" font-size="10">$2,000/mo</text>
          <text x="710" y="318" text-anchor="middle" fill="#6b7280" font-family="-apple-system,sans-serif" font-size="9">Dec 31 — ongoing</text>
          <!-- Bottom note -->
          <rect x="200" y="345" width="500" height="35" rx="8" fill="url(#alG1)" opacity="0.1"/>
          <text x="450" y="368" text-anchor="middle" fill="#4361ee" font-family="-apple-system,sans-serif" font-size="11" font-weight="600">Query any date to get exact MRR, seat count, and configuration at that point in time</text>
          <!-- CPQ comparison callout -->
          <rect x="60" y="392" width="780" height="30" rx="6" fill="#fff8e1" stroke="#e65100" stroke-width="1"/>
          <text x="450" y="412" text-anchor="middle" fill="#e65100" font-family="-apple-system,sans-serif" font-size="10.5">CPQ Note: Replaces SBQQ__Subscription__c + ContractManipulationAPI.AmendmentCreator → Assets with AssetStatePeriod + DRO</text>
        </svg>

        <div class="callout callout-orange">
            <strong>CPQ Team Note</strong>
            In CPQ, subscriptions lived in <code>SBQQ__Subscription__c</code> and amendments were created via the <code>ContractManipulationAPI.AmendmentCreator</code>. In RCA, subscriptions are tracked as <strong>Assets</strong> with <strong>AssetStatePeriod</strong> records, and amendments are handled by the <strong>Dynamic Revenue Orchestrator</strong>.
        </div>

        <h3>Assets vs. Subscriptions — The Go-Forward Path</h3>

        <div class="callout callout-red">
            <strong>CPQ is End-of-Sale</strong>
            As of early 2025, Salesforce CPQ is officially end-of-sale — no longer available to new customers and receiving no new feature development. RCA is the go-forward platform. All new implementations should use RCA. Existing CPQ customers should plan migration.
        </div>

        <p><strong>The fundamental shift:</strong> There is no <code>SBQQ__Subscription__c</code> in RCA. The standard Salesforce <code>Asset</code> object is the single source of truth for what a customer owns — both one-time purchases and recurring subscriptions. This is a conceptual change, not just a name change.</p>

        <table>
            <tr><th>Concept</th><th>CPQ Approach</th><th>RCA Approach</th></tr>
            <tr><td>What the customer owns</td><td><code>SBQQ__Subscription__c</code> for recurring; <code>Asset</code> optional</td><td><code>Asset</code> for everything (one-time and recurring)</td></tr>
            <tr><td>Subscription type</td><td><code>SBQQ__SubscriptionType__c</code> field</td><td><code>ProductSellingModel</code> (One-Time, Term-Defined, Evergreen, Usage-Based)</td></tr>
            <tr><td>Subscription term</td><td><code>SBQQ__SubscriptionTerm__c</code></td><td><code>ProductSellingModel</code> term configuration</td></tr>
            <tr><td>Mid-term changes</td><td><code>ContractManipulationAPI.AmendmentCreator</code></td><td>Amendment quote → Order → <code>AssetAction</code> (type: Amendment)</td></tr>
            <tr><td>Renewals</td><td>Contract renewal → new SBQQ__Quote__c</td><td>Automatic or override renewal → <code>AssetAction</code> (type: Renewal)</td></tr>
            <tr><td>Cancellation</td><td>Manual process or custom automation</td><td>Cancellation date → <code>AssetAction</code> (type: Cancellation)</td></tr>
            <tr><td>History / audit trail</td><td>Limited — custom fields or notes</td><td><code>AssetStatePeriod</code> — complete time-series of quantity, MRR, and state</td></tr>
            <tr><td>Point-in-time reporting</td><td>Not supported natively</td><td>Query <code>AssetStatePeriod</code> for exact state at any date</td></tr>
            <tr><td>Inter-account transfers</td><td>Custom implementation</td><td>Built-in <code>AssetAction</code> (type: Transfer)</td></tr>
        </table>

        <h4>How the Lifecycle Flows</h4>
        <ol>
            <li><strong>Initial Sale:</strong> Quote → Order → Order activated → Asset auto-created → <code>AssetAction</code> (Initial Sale) logged → first <code>AssetStatePeriod</code> created</li>
            <li><strong>Amendment:</strong> Select asset → amendment quote → adjust quantities/config → new order → Asset quantity updated → <code>AssetAction</code> (Amendment) logged → new <code>AssetStatePeriod</code> reflects change</li>
            <li><strong>Renewal:</strong> Two paths — <em>Automatic Renewal</em> (extends at term end) or <em>Override Renewal Term</em> (custom dates with refund quotes for unused portions) → <code>AssetAction</code> (Renewal) logged</li>
            <li><strong>Cancellation:</strong> Specify cancellation effective date → cancellation order → quantity set to negative of total → <code>AssetAction</code> (Cancellation) logged</li>
        </ol>

        <h4>Key Advantages Over CPQ Subscriptions</h4>
        <ul>
            <li><strong>Granular operations</strong> — renew, amend, or cancel individual assets without touching the full contract</li>
            <li><strong>Full audit trail</strong> — the Asset Lifecycle tab shows complete history of all changes</li>
            <li><strong>Native platform</strong> — standard Salesforce objects accessible to standard reporting, flows, and APIs</li>
            <li><strong>Unified model</strong> — same Asset object tracks both one-time and recurring products</li>
            <li><strong>Time-travel queries</strong> — query <code>AssetStatePeriod</code> to get exact MRR, quantity, and config at any historical date</li>
            <li><strong>Built-in transfers</strong> — move assets between accounts natively (Winter '26+)</li>
        </ul>

        <div class="callout callout-purple">
            <strong>Migration Reality</strong>
            Moving from CPQ subscriptions to RCA assets is <strong>not a lift-and-shift</strong>. You must decommission all custom Apex, Triggers, and Validation Rules built on <code>SBQQ__Subscription__c</code>. Straightforward implementations: 4-6 months. Complex enterprise migrations with heavy custom Apex and ERP integrations: 9-12 months.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- BILLING -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="billing">
        <h2>Billing &amp; Revenue Recognition</h2>

        <h3>RCA Billing Capabilities</h3>
        <ul>
            <li><strong>Recurring billing</strong> — automated invoice generation on schedule</li>
            <li><strong>Usage-based billing</strong> — metered consumption with rating engine</li>
            <li><strong>One-time billing</strong> — immediate invoicing on order</li>
            <li><strong>Configurable billing schedules</strong> — flexible timing and frequency</li>
            <li><strong>Tax Management</strong> — built-in tax calculation and integration points</li>
            <li><strong>Wallet/Credits</strong> — pre-paid credits and consumption tracking</li>
        </ul>

        <h3>Revenue Recognition (ASC 606)</h3>
        <p>RCA provides automated revenue scheduling per contract terms, supporting ASC 606 compliance natively.</p>

        <table>
            <tr><th>Recognition Pattern</th><th>When Revenue is Recognized</th><th>Use Case</th></tr>
            <tr><td>Over Time</td><td>Spread evenly across service period</td><td>Subscriptions, SaaS, managed services</td></tr>
            <tr><td>Point in Time</td><td>100% at delivery/transfer of control</td><td>Hardware, one-time licenses</td></tr>
            <tr><td>Milestone-Based</td><td>Percentage at each milestone completion</td><td>Professional services, projects</td></tr>
        </table>

        <div class="callout callout-blue">
            <strong>Finance Integration</strong>
            RCA is designed with stronger ERP and accounting system integration than CPQ/Billing. Connection to financial systems is a first-class capability, not an afterthought.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- OMNISCRIPTS -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="omniscripts">
        <h2>OmniScripts &amp; OmniStudio</h2>

        <p>OmniStudio is a separate Salesforce platform (originally from Vlocity/Industries) that provides low-code tools for building guided digital experiences. It is <strong>not built into RCA</strong> but is deeply integrated and commonly used alongside it — especially in Industries implementations (Communications, Media, Energy, Financial Services).</p>

        <div class="callout callout-blue">
            <strong>When Do You Need OmniStudio?</strong>
            OmniStudio is <strong>not required</strong> for basic RCA implementations. You need it when you want: custom guided selling experiences beyond standard Screen Flows, advanced document generation (DocGen via OmniStudio), customer-facing self-service portals, or complex multi-step wizards for product configuration.
        </div>

        <h3>Core OmniStudio Components</h3>
        <table>
            <tr><th>Component</th><th>What It Does</th><th>RCA Use Case</th></tr>
            <tr><td><strong>OmniScripts</strong></td><td>Drag-and-drop guided, multi-step wizards</td><td>Guided selling flows, "Request a Quote" wizards, product configuration UIs, service provisioning, contract execution</td></tr>
            <tr><td><strong>FlexCards</strong></td><td>Dynamic UI components displaying contextual info at a glance</td><td>Account insights, usage metrics, renewal dates, upsell opportunities, transaction summaries</td></tr>
            <tr><td><strong>DataRaptors</strong></td><td>Data extraction, transformation, and loading</td><td>Pull data from Salesforce records for document templates, prepare data for OmniScript steps, bulk data operations</td></tr>
            <tr><td><strong>Integration Procedures</strong></td><td>Server-side orchestration connecting Salesforce to external systems</td><td>ERP integration, billing system connections, payment gateway orchestration, complex multi-system data flows</td></tr>
        </table>

        <h3>Common RCA + OmniScript Patterns</h3>

        <h4>1. Document Generation (DocGen)</h4>
        <p>One of the most common integration points. OmniScripts drive the generation of contracts, proposals, quotes, NDAs, and service agreements:</p>
        <ul>
            <li>DataRaptors extract data from Quote, QuoteLineItem, Account, and related objects</li>
            <li>Transform Data Mappers format the data for templates</li>
            <li>Document Template Designer produces Word/PDF output</li>
            <li>Setup: Install OmniStudio → assign DocGen Designer/User roles → create Template Libraries → configure Extract and Transform Data Mappers → build templates</li>
        </ul>

        <h4>2. Guided Selling / Quote Building</h4>
        <p>Step-by-step wizards that walk sales reps through creating quotes:</p>
        <ul>
            <li>OmniScript provides the custom UI layer</li>
            <li>Calls RCA's Product Configurator APIs and Cart APIs as the backend</li>
            <li>Can partially or fully replace the standard out-of-box LWC Cart</li>
            <li>Useful when the standard catalog browsing experience doesn't match business requirements</li>
        </ul>

        <h4>3. Self-Service Portals</h4>
        <p>OmniScripts power customer-facing portals in Experience Cloud:</p>
        <ul>
            <li>Self-service quoting and renewals</li>
            <li>Usage dashboards and billing portals</li>
            <li>Product configuration for B2B e-commerce scenarios</li>
        </ul>

        <h4>4. Service Provisioning</h4>
        <p>In telecom, utilities, and manufacturing:</p>
        <ul>
            <li>Post-order provisioning workflows</li>
            <li>Warranty registration with guided data capture</li>
            <li>Complex fulfillment orchestration UIs</li>
        </ul>

        <h3>OmniStudio vs. Standard Screen Flows</h3>
        <table>
            <tr><th>Consideration</th><th>Screen Flows (Standard)</th><th>OmniScripts (OmniStudio)</th></tr>
            <tr><td>Licensing</td><td>Included with RCA</td><td>Requires OmniStudio PSL</td></tr>
            <tr><td>Complexity</td><td>Good for simple-to-moderate flows</td><td>Built for complex, multi-step guided experiences</td></tr>
            <tr><td>UI Customization</td><td>Standard Lightning components</td><td>Highly customizable with FlexCards and custom LWCs</td></tr>
            <tr><td>Data Integration</td><td>Flow actions and Apex</td><td>DataRaptors + Integration Procedures (low-code)</td></tr>
            <tr><td>Document Generation</td><td>Limited</td><td>Full DocGen with template engine</td></tr>
            <tr><td>Industries Features</td><td>Generic</td><td>Industry-specific accelerators and templates</td></tr>
            <tr><td>Recommendation</td><td>Start here for most RCA implementations</td><td>Add when standard flows can't meet requirements</td></tr>
        </table>

        <div class="callout callout-green">
            <strong>Practical Advice</strong>
            For most RCA implementations, start with <strong>standard Screen Flows</strong> for product configuration and guided selling. Only bring in OmniStudio when you hit limitations — particularly around document generation, complex multi-system integrations, or customer-facing portal experiences. The OmniStudio license is an additional cost.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- MIGRATION -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="migration">
        <h2>Migration from CPQ to RCA</h2>

        <h3>Migration Strategy Phases</h3>
        <svg viewBox="0 0 900 980" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:900px;margin:15px auto;display:block;font-family:-apple-system,sans-serif;">
            <defs>
                <linearGradient id="mgPhase1" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#4361ee"/><stop offset="100%" stop-color="#3a56d4"/></linearGradient>
                <linearGradient id="mgPhase2" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#7209b7"/><stop offset="100%" stop-color="#6508a3"/></linearGradient>
                <linearGradient id="mgPhase3" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#118ab2"/><stop offset="100%" stop-color="#0f7a9e"/></linearGradient>
                <linearGradient id="mgPhase4" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#e65100"/><stop offset="100%" stop-color="#cc4800"/></linearGradient>
                <linearGradient id="mgPhase5" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#06d6a0"/><stop offset="100%" stop-color="#05bf8e"/></linearGradient>
                <marker id="mgArrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b"/></marker>
            </defs>
            <rect width="900" height="980" rx="12" fill="#f8f9ff"/>
            <text x="450" y="32" text-anchor="middle" font-size="18" font-weight="700" fill="#1e293b">Migration Strategy — 5 Phases</text>

            <!-- Phase 1: Assessment -->
            <rect x="30" y="50" width="840" height="148" rx="10" fill="white" stroke="#4361ee" stroke-width="2"/>
            <rect x="30" y="50" width="840" height="36" rx="10" fill="url(#mgPhase1)"/>
            <rect x="30" y="76" width="840" height="10" fill="url(#mgPhase1)"/>
            <text x="50" y="74" font-size="15" font-weight="700" fill="white">PHASE 1: Assessment</text>
            <text x="810" y="74" text-anchor="end" font-size="13" fill="rgba(255,255,255,0.85)">2-4 weeks</text>
            <text x="50" y="108" font-size="12.5" fill="#334155">&#8226; Audit current CPQ implementation</text>
            <text x="50" y="126" font-size="12.5" fill="#334155">&#8226; Document ALL custom objects, fields, Apex code</text>
            <text x="50" y="144" font-size="12.5" fill="#334155">&#8226; Map CPQ features to RCA equivalents</text>
            <text x="450" y="108" font-size="12.5" fill="#334155">&#8226; Identify gaps (CPQ features not yet in RCA)</text>
            <text x="450" y="126" font-size="12.5" fill="#334155">&#8226; Inventory Price Rules &#8594; Decision Tables</text>
            <text x="450" y="144" font-size="12.5" fill="#334155">&#8226; Inventory Product Rules &#8594; Constraints</text>
            <text x="450" y="162" font-size="12.5" fill="#334155">&#8226; Decide: parallel run vs. cutover strategy</text>

            <!-- Arrow 1→2 -->
            <line x1="450" y1="198" x2="450" y2="218" stroke="#64748b" stroke-width="2" marker-end="url(#mgArrow)"/>

            <!-- Phase 2: Foundation -->
            <rect x="30" y="220" width="840" height="130" rx="10" fill="white" stroke="#7209b7" stroke-width="2"/>
            <rect x="30" y="220" width="840" height="36" rx="10" fill="url(#mgPhase2)"/>
            <rect x="30" y="246" width="840" height="10" fill="url(#mgPhase2)"/>
            <text x="50" y="244" font-size="15" font-weight="700" fill="white">PHASE 2: Foundation</text>
            <text x="810" y="244" text-anchor="end" font-size="13" fill="rgba(255,255,255,0.85)">2-3 weeks</text>
            <text x="50" y="278" font-size="12.5" fill="#334155">&#8226; Enable RCA in sandbox</text>
            <text x="50" y="296" font-size="12.5" fill="#334155">&#8226; Set up permission sets and licenses</text>
            <text x="50" y="314" font-size="12.5" fill="#334155">&#8226; Configure pricing procedures (clone from templates)</text>
            <text x="450" y="278" font-size="12.5" fill="#334155">&#8226; Build product catalog structure</text>
            <text x="450" y="296" font-size="12.5" fill="#334155">&#8226; Create Product Selling Models</text>
            <text x="450" y="314" font-size="12.5" fill="#334155">&#8226; Create initial products (without complex config)</text>

            <!-- Arrow 2→3 -->
            <line x1="450" y1="350" x2="450" y2="370" stroke="#64748b" stroke-width="2" marker-end="url(#mgArrow)"/>

            <!-- Phase 3: Configuration (largest) -->
            <rect x="30" y="372" width="840" height="238" rx="10" fill="white" stroke="#118ab2" stroke-width="2"/>
            <rect x="30" y="372" width="840" height="36" rx="10" fill="url(#mgPhase3)"/>
            <rect x="30" y="398" width="840" height="10" fill="url(#mgPhase3)"/>
            <text x="50" y="396" font-size="15" font-weight="700" fill="white">PHASE 3: Configuration</text>
            <text x="810" y="396" text-anchor="end" font-size="13" fill="rgba(255,255,255,0.85)">3-6 weeks</text>
            <!-- Pricing Logic -->
            <text x="50" y="430" font-size="13" font-weight="600" fill="#118ab2">Recreate Pricing Logic</text>
            <text x="70" y="448" font-size="12" fill="#334155">Price Rules &#8594; Decision Tables</text>
            <text x="70" y="464" font-size="12" fill="#334155">Discount Schedules &#8594; Price Adj. Schedules</text>
            <text x="70" y="480" font-size="12" fill="#334155">Calculator Plugins &#8594; Pricing Elements</text>
            <!-- Product Rules -->
            <text x="310" y="430" font-size="13" font-weight="600" fill="#118ab2">Recreate Product Rules</text>
            <text x="330" y="448" font-size="12" fill="#334155">Validation Rules &#8594; Constraint Models</text>
            <text x="330" y="464" font-size="12" fill="#334155">Selection Rules &#8594; AutoAdd/Require</text>
            <text x="330" y="480" font-size="12" fill="#334155">Filter Rules &#8594; Qualification Rules</text>
            <text x="330" y="496" font-size="12" fill="#334155">Alert Rules &#8594; Message Rules</text>
            <!-- Bundles & Attributes -->
            <text x="590" y="430" font-size="13" font-weight="600" fill="#118ab2">Build Bundles &amp; Attributes</text>
            <text x="610" y="448" font-size="12" fill="#334155">Features &#8594; ProductComponentGroups</text>
            <text x="610" y="464" font-size="12" fill="#334155">Options &#8594; ProductRelatedComponents</text>
            <text x="610" y="480" font-size="12" fill="#334155">Config Attrs &#8594; AttributeDefinitions</text>
            <!-- Approval -->
            <text x="50" y="520" font-size="13" font-weight="600" fill="#118ab2">Set up approval workflows</text>
            <!-- Divider lines -->
            <line x1="296" y1="418" x2="296" y2="510" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="4"/>
            <line x1="576" y1="418" x2="576" y2="510" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="4"/>

            <!-- Arrow 3→4 -->
            <line x1="450" y1="610" x2="450" y2="630" stroke="#64748b" stroke-width="2" marker-end="url(#mgArrow)"/>

            <!-- Phase 4: Data Migration -->
            <rect x="30" y="632" width="840" height="130" rx="10" fill="white" stroke="#e65100" stroke-width="2"/>
            <rect x="30" y="632" width="840" height="36" rx="10" fill="url(#mgPhase4)"/>
            <rect x="30" y="658" width="840" height="10" fill="url(#mgPhase4)"/>
            <text x="50" y="656" font-size="15" font-weight="700" fill="white">PHASE 4: Data Migration</text>
            <text x="810" y="656" text-anchor="end" font-size="13" fill="rgba(255,255,255,0.85)">2-4 weeks</text>
            <text x="50" y="690" font-size="12.5" fill="#334155">&#8226; Migrate active quotes (if needed)</text>
            <text x="50" y="708" font-size="12.5" fill="#334155">&#8226; Migrate contracts &amp; subscriptions &#8594; Assets</text>
            <text x="50" y="726" font-size="12.5" fill="#334155">&#8226; Migrate asset state periods</text>
            <text x="450" y="690" font-size="12.5" fill="#334155">&#8226; Validate MRR/ARR calculations</text>
            <text x="450" y="708" font-size="12.5" fill="#334155">&#8226; Reconcile data between old and new</text>

            <!-- Arrow 4→5 -->
            <line x1="450" y1="762" x2="450" y2="782" stroke="#64748b" stroke-width="2" marker-end="url(#mgArrow)"/>

            <!-- Phase 5: Testing & Cutover -->
            <rect x="30" y="784" width="840" height="130" rx="10" fill="white" stroke="#06d6a0" stroke-width="2"/>
            <rect x="30" y="784" width="840" height="36" rx="10" fill="url(#mgPhase5)"/>
            <rect x="30" y="810" width="840" height="10" fill="url(#mgPhase5)"/>
            <text x="50" y="808" font-size="15" font-weight="700" fill="white">PHASE 5: Testing &amp; Cutover</text>
            <text x="810" y="808" text-anchor="end" font-size="13" fill="rgba(255,255,255,0.85)">2-4 weeks</text>
            <text x="50" y="842" font-size="12.5" fill="#334155">&#8226; UAT with real sales scenarios</text>
            <text x="50" y="860" font-size="12.5" fill="#334155">&#8226; Performance testing (large quotes, complex bundles)</text>
            <text x="50" y="878" font-size="12.5" fill="#334155">&#8226; Integration testing (ERP, payment, e-signature)</text>
            <text x="450" y="842" font-size="12.5" fill="#334155">&#8226; Parallel run period (both systems active)</text>
            <text x="450" y="860" font-size="12.5" fill="#334155">&#8226; Cutover and decommission CPQ</text>

            <!-- Total timeline -->
            <rect x="250" y="935" width="400" height="32" rx="16" fill="#1e293b"/>
            <text x="450" y="956" text-anchor="middle" font-size="13" font-weight="600" fill="white">Total Estimated Timeline: 11-21 weeks</text>
        </svg>

        <h3>Migration Automation Levels</h3>
        <table>
            <tr><th>Category</th><th>Automation Level</th><th>Details</th></tr>
            <tr><td>Product catalog, bundles, basic attributes</td><td style="color:var(--sf-green);font-weight:700">Automated</td><td>Straightforward data mapping</td></tr>
            <tr><td>Basic pricing, simple discounts</td><td style="color:var(--sf-green);font-weight:700">Automated</td><td>Price book entries map directly</td></tr>
            <tr><td>Complex price rules</td><td style="color:var(--sf-orange);font-weight:700">Assisted</td><td>Requires Decision Table design</td></tr>
            <tr><td>Product rules (validation, selection)</td><td style="color:var(--sf-orange);font-weight:700">Assisted</td><td>Need rule type mapping</td></tr>
            <tr><td>Calculator plugins (custom Apex)</td><td style="color:var(--sf-red);font-weight:700">Manual</td><td>Rebuild as declarative pricing</td></tr>
            <tr><td>Dynamic bundles</td><td style="color:var(--sf-red);font-weight:700">Manual</td><td>Different architecture in RCA</td></tr>
            <tr><td>Heavily customized QLE</td><td style="color:var(--sf-red);font-weight:700">Manual</td><td>Redesign for native UI + flows</td></tr>
            <tr><td>Custom SBQQ triggers/Apex</td><td style="color:var(--sf-red);font-weight:700">Manual</td><td>Refactor or replace with declarative</td></tr>
        </table>

        <h3>Key Migration Challenges</h3>
        <div class="callout callout-red">
            <strong>Data Model Mismatch</strong>
            CPQ custom objects don't align neatly with RCA's object model. Fields may need transformation or merging, relationships must be redefined, and automations built on CPQ fields may break if not carefully refactored.
        </div>

        <div class="callout callout-orange">
            <strong>Integration Rework</strong>
            Existing CPQ integrations with ERPs, e-signature platforms, and contract systems require reconfiguration. API endpoints, field references, and data formats all change.
        </div>

        <div class="callout callout-blue">
            <strong>Customization Audit</strong>
            Legacy Apex code and custom objects should be replaced with declarative RCA features where possible. Audit all SBQQ trigger handlers, calculator plugins, and service router calls.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- BEST PRACTICES -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="best-practices">
        <h2>Best Practices</h2>

        <h3>Implementation Best Practices</h3>
        <ol>
            <li><strong>Plan product taxonomy first.</strong> Design your catalog hierarchy, bundle structures, and selling models on paper before creating anything in the org. ProductType cannot be changed once set.</li>
            <li><strong>Start with defaults.</strong> Use the default Product Configuration Flow. Only customize after UAT demonstrates a real need.</li>
            <li><strong>Clone pricing procedure templates.</strong> Never build from scratch. Missing required elements causes silent failures.</li>
            <li><strong>Sync Pricing Data religiously.</strong> After every single pricing change. Set up a deployment checklist that includes this step.</li>
            <li><strong>Use ProductSellingModelOptions.</strong> Leverage multiple selling models per product instead of creating duplicate SKUs.</li>
            <li><strong>Use ProductClassifications for shared attributes.</strong> Don't assign attributes individually to each product when families share characteristics.</li>
            <li><strong>Validate bundle definitions.</strong> Always run "Validate Product Definition" before activating bundles.</li>
            <li><strong>Test in sandbox first.</strong> Never configure RCA directly in production.</li>
        </ol>

        <h3>Performance Tips</h3>
        <ul>
            <li>Use specific conditions over broad wildcards in rules</li>
            <li>Minimize overlapping rule definitions</li>
            <li>Monitor <code>ConstraintEngineNodeStatus</code> for bottlenecks</li>
            <li>Keep decision tables focused — don't overload with too many conditions</li>
            <li>Build rules incrementally — simple to complex, test each layer</li>
        </ul>

        <h3>Security Best Practices</h3>
        <ul>
            <li>Use Permission Set Groups with Muting Permission Sets to remove risky "Run Flows" / "Manage Flows" permissions</li>
            <li>Assign PSLs and Permission Sets by role, not blanket to all users</li>
            <li>Review permission sets before assigning — some grant broad access</li>
            <li>Separate admin permission sets from user permission sets</li>
        </ul>

        <h3>Common Pitfalls to Avoid</h3>
        <table>
            <tr><th>Pitfall</th><th>Impact</th><th>Prevention</th></tr>
            <tr><td>Forgetting Sync Pricing Data</td><td>Quotes show wrong prices</td><td>Add to every deployment checklist</td></tr>
            <tr><td>Setting wrong ProductType</td><td>Can't convert Simple ↔ Bundle</td><td>Plan taxonomy before creation</td></tr>
            <tr><td>Missing ConstraintEngineNodeStatus</td><td>Rules fail silently</td><td>Create fields before enabling rules</td></tr>
            <tr><td>No ProductComponentGroup on bundle</td><td>Configurable bundle doesn't work</td><td>Always create groups first</td></tr>
            <tr><td>Building pricing procedures from scratch</td><td>Missing required elements</td><td>Always clone from templates</td></tr>
            <tr><td>Asset state period gaps</td><td>MRR reporting errors</td><td>Ensure contiguous date ranges</td></tr>
            <tr><td>Blanket permission set assignment</td><td>Security overexposure</td><td>Role-based assignment with muting</td></tr>
        </table>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- ENHANCEMENTS -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="enhancements">
        <h2>Recent Enhancements (2025-2026)</h2>

        <h3>Summer '25</h3>
        <table>
            <tr><th>Enhancement</th><th>Impact</th></tr>
            <tr><td>Support for 200+ product attributes</td><td>Enables complex product configuration</td></tr>
            <tr><td>Improved Visual Builder for rules</td><td>Point-and-click rule creation</td></tr>
            <tr><td>Enhanced Product Configurator UI</td><td>Better user experience</td></tr>
        </table>

        <h3>Winter '26 (October 2025)</h3>
        <table>
            <tr><th>Enhancement</th><th>Impact</th></tr>
            <tr><td>Salesforce GO — guided setup experience</td><td>Step-by-step RCA enablement wizard</td></tr>
            <tr><td>Ramp deals for quote line groups</td><td>Multi-product ramping within grouped line items</td></tr>
            <tr><td>Quote Deep Clone</td><td>Replicate entire quotes including lines and groups in one action</td></tr>
            <tr><td>Multiple orders from single quote</td><td>Generate orders by group, by line field, or as single order</td></tr>
            <tr><td>Refreshed Transaction Line Editor</td><td>Consolidated groups, nested structures, inline adjustments, quick-add</td></tr>
            <tr><td>CSV quote imports</td><td>Bulk quote creation</td></tr>
            <tr><td>CPI-based asset adjustments</td><td>Inflation-based price increases</td></tr>
            <tr><td>Asset transfers</td><td>Inter-account asset transfers</td></tr>
            <tr><td>Asset rollback</td><td>Undo asset lifecycle changes</td></tr>
            <tr><td>Auto co-termination</td><td>Contract-based quote alignment</td></tr>
            <tr><td>Approval component</td><td>Preview approval chains, submit without custom development</td></tr>
            <tr><td>Advanced Configurator import</td><td>Import product component groups into models; use object data for constraints (up to 50K rows)</td></tr>
            <tr><td>Product Catalog caching</td><td>Faster catalog browsing via Product Discovery Settings</td></tr>
        </table>

        <h3>Spring '26 (February 2026)</h3>
        <table>
            <tr><th>Enhancement</th><th>Impact</th></tr>
            <tr><td><strong>Promotions Engine (NEW)</strong></td><td>Manual and automatic discounts on products/categories with eligibility rules and multi-promotion evaluation</td></tr>
            <tr><td><strong>Always-On Instant Pricing</strong></td><td>Detects price-impacting changes and recalculates only affected lines; unchanged lines skipped</td></tr>
            <tr><td>5-level nested pricing procedures</td><td>Ascending propagation and horizontal calculations in pricing</td></tr>
            <tr><td>Nested IF in formula pricing</td><td>Complex conditional logic within Formula-Based Pricing elements</td></tr>
            <tr><td>Pricing solution packaging</td><td>Package entire pricing solutions for deployment across orgs</td></tr>
            <tr><td>Advanced Price Log Settings</td><td>Detailed diagnostic data including input values and exception details</td></tr>
            <tr><td>Multiple independent ramp schedule groups</td><td>Multiple ramp schedules on single quotes/orders</td></tr>
            <tr><td>Product Configurator translation support</td><td>Runtime message translation with bulk label generation</td></tr>
            <tr><td>Non-blocking Product Configurator UI</td><td>Multiple value changes without waiting for each to complete</td></tr>
            <tr><td>Advanced Approvals enhancements</td><td>Custom auto-approval via flows, custom email templates, 30 conditions per step</td></tr>
            <tr><td>DRO: orchestrate any transaction type</td><td>Custom logic insertion between decomposition and plan generation</td></tr>
            <tr><td>Billing Dispute Resolution</td><td>Standardized dispute processes</td></tr>
            <tr><td>Statement of Account</td><td>Financial summaries for customers</td></tr>
            <tr><td>Agentforce for Revenue Management</td><td>AI-powered product recommendations, billing assistant, token overage detection</td></tr>
            <tr><td>Quote line import auto-populates defaults</td><td>Default child lines and attributes filled automatically</td></tr>
            <tr><td>Future-dated amendments</td><td>Amendments for orders with future start dates</td></tr>
        </table>

        <div class="callout callout-green">
            <strong>Salesforce releases RCA enhancements 3x per year</strong> (Spring, Summer, Winter). The pace of new feature delivery is significantly faster than CPQ ever saw. Review release notes each cycle. Note: Salesforce has begun rebranding Revenue Cloud under <strong>"Agentforce Revenue Management"</strong> to reflect their AI-first strategy.
        </div>
    </div>

    <!-- ═══════════════════════════════════════════════════════════ -->
    <!-- RESOURCES -->
    <!-- ═══════════════════════════════════════════════════════════ -->
    <div class="section" id="resources">
        <h2>Resources &amp; References</h2>

        <h3>Official Salesforce Documentation</h3>
        <ul>
            <li><a href="https://help.salesforce.com/s/articleView?id=ind.data_model_overview.htm" target="_blank">Revenue Cloud Data Model Overview</a></li>
            <li><a href="https://resources.docs.salesforce.com/latest/latest/en-us/sfdc/pdf/revenue_lifecycle_management_dev_guide.pdf" target="_blank">Revenue Cloud Developer Guide (PDF)</a></li>
            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.revenue_lifecycle_management_dev_guide.meta/revenue_lifecycle_management_dev_guide/pricing_std_objects_parent.htm" target="_blank">Pricing Standard Objects Reference</a></li>
            <li><a href="https://developer.salesforce.com/docs/atlas.en-us.revenue_lifecycle_management_dev_guide.meta/revenue_lifecycle_management_dev_guide/pcm_std_objects_parent.htm" target="_blank">Product Catalog Management Objects Reference</a></li>
            <li><a href="https://developer.salesforce.com/docs/platform/data-models/guide/revenue-cloud-category.html" target="_blank">Revenue Cloud Data Model Gallery</a></li>
            <li><a href="https://help.salesforce.com/s/articleView?id=ind.set_up_revenue_cloud.htm" target="_blank">Set Up Revenue Cloud</a></li>
            <li><a href="https://help.salesforce.com/s/articleView?id=ind.revenue_cloud_permission_sets_table.htm" target="_blank">Revenue Cloud Permission Sets</a></li>
            <li><a href="https://trailhead.salesforce.com/content/learn/trails/configure-revenue-cloud" target="_blank">Configure Revenue Cloud (Trailhead Trail)</a></li>
        </ul>

        <h3>Community &amp; Blog Resources</h3>
        <ul>
            <li><a href="https://www.cloudgiants.com/blog-detailed/rca-products-guide" target="_blank">Product Catalog Setup Guide (Cloud Giants)</a></li>
            <li><a href="https://2creative.ca/setup-rules-in-salesforce-revenue-cloud-advanced-rca/" target="_blank">Setup Rules in RCA (2Creative)</a></li>
            <li><a href="https://thecloudupdate.co/setting-up-revenue-cloud-from-scratch/" target="_blank">Setting Up Revenue Cloud from Scratch (The Cloud Update)</a></li>
            <li><a href="https://thecloudupdate.co/pricing-procedures-in-salesforce-revenue-cloud/" target="_blank">Pricing Procedures in Revenue Cloud (The Cloud Update)</a></li>
            <li><a href="https://gearset.com/blog/revenue-cloud/" target="_blank">RCA Explained: Features, Migration &amp; DevOps (Gearset)</a></li>
            <li><a href="https://applikontech.com/guide-to-setting-up-salesforce-revenue-cloud/" target="_blank">Guide to Setting Up Revenue Cloud (Applikontech)</a></li>
            <li><a href="https://www.salesforceben.com/your-guide-to-salesforce-revenue-cloud/" target="_blank">Your Guide to Revenue Cloud (Salesforce Ben)</a></li>
        </ul>

        <h3>Migration Resources</h3>
        <ul>
            <li><a href="https://www.simplus.com/making-the-move-key-learnings-and-best-practices-when-migrating-from-salesforce-cpq-to-revenue-cloud-advanced/" target="_blank">CPQ to RCA Migration Best Practices (Simplus)</a></li>
            <li><a href="https://gearset.com/solutions/manage-data/rca/" target="_blank">RCA Deployment Solution (Gearset)</a></li>
            <li><a href="https://www.grazitti.com/blog/7-step-cpq-to-salesforce-rca-formerly-rlm-migration-plan/" target="_blank">7-Step CPQ to RCA Migration Plan (Grazitti)</a></li>
        </ul>
    </div>

</div>

<div class="footer">
    <p>Salesforce Revenue Cloud Advanced — Complete Knowledge Guide</p>
    <p>Prepared by Eddie Zaragoza &mdash; <a href="mailto:ezaragoza@crosscountry-consulting.com" style="color:rgba(255,255,255,0.8);">ezaragoza@crosscountry-consulting.com</a></p>
    <p>Generated February 2026 &bull; Part of the <strong>Salesforce Knowledge Base</strong></p>
    <p>Sources include official Salesforce documentation, Trailhead, community blogs, and implementation experience.</p>
</div>

<button class="back-to-top" id="backToTop" title="Back to top">&#8593;</button>

<script>
    const btn = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
        btn.classList.toggle('visible', window.scrollY > 400);
    });
    btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Collapsible sticky nav
    (function() {
        const nav = document.getElementById('navBar');
        const toggle = document.getElementById('navToggle');
        const SCROLL_THRESHOLD = 120;

        window.addEventListener('scroll', () => {
            if (window.scrollY > SCROLL_THRESHOLD) {
                if (!nav.classList.contains('collapsed')) {
                    nav.classList.add('collapsed');
                    nav.classList.remove('expanded');
                    toggle.innerHTML = '&#9776; Show Links';
                }
            } else {
                nav.classList.remove('collapsed', 'expanded');
            }
        }, { passive: true });

        toggle.addEventListener('click', () => {
            const isExpanded = nav.classList.toggle('expanded');
            toggle.innerHTML = isExpanded ? '&#10005; Hide Links' : '&#9776; Show Links';
        });

        // Auto-collapse after clicking a nav link
        nav.querySelector('.nav-links').addEventListener('click', (e) => {
            if (e.target.tagName === 'A' && nav.classList.contains('collapsed')) {
                nav.classList.remove('expanded');
                toggle.innerHTML = '&#9776; Show Links';
            }
        });
    })();
</script>

</body>
</html>
